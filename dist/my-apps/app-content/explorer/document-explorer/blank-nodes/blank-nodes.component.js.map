{"version":3,"sources":["my-apps/app-content/explorer/document-explorer/blank-nodes/blank-nodes.component.ts"],"names":[],"mappings":"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","file":"my-apps/app-content/explorer/document-explorer/blank-nodes/blank-nodes.component.js","sourcesContent":["import { Component, ElementRef, Input, Output, EventEmitter, SimpleChange, AfterViewInit, OnChanges } from \"@angular/core\";\n\nimport * as RDFNode from \"carbonldp/RDF/RDFNode\";\n\n//import { BlankNodeComponent } from \"./blank-node.component\"\nimport { BlankNodeRecords } from \"./blank-node.component\"\n//import { PropertyComponent } from \"./../property/property.component\";\n\nimport $ from \"jquery\";\nimport \"semantic-ui/semantic\";\n\nimport template from \"./blank-nodes.component.html!\";\nimport style from \"./blank-nodes.component.css!text\";\n\n@Component( {\n\tselector: \"cp-blank-nodes\",\n\ttemplate: template,\n\tstyles: [ style ],\n\t//directives: [ PropertyComponent, BlankNodeComponent ],\n} )\n\nexport class BlankNodesComponent implements AfterViewInit, OnChanges {\n\n\telement:ElementRef;\n\t$element:JQuery;\n\n\tnodesTab:JQuery;\n\topenedBNodes:RDFNode.Class[] = [];\n\tbNodesChanges:Map<string, BlankNodeRecords> = new Map<string, BlankNodeRecords>();\n\n\t@Input() bNodes:RDFNode.Class[] = [];\n\t@Input() namedFragments:RDFNode.Class[] = [];\n\t@Input() documentURI:string = \"\";\n\n\t@Output() onChanges:EventEmitter<Map<string, BlankNodeRecords>> = new EventEmitter<Map<string, BlankNodeRecords>>();\n\t@Output() onOpenBNode:EventEmitter<string> = new EventEmitter<string>();\n\t@Output() onOpenNamedFragment:EventEmitter<string> = new EventEmitter<string>();\n\n\tconstructor( element:ElementRef ) {\n\t\tthis.element = element;\n\t}\n\n\tngAfterViewInit():void {\n\t\tthis.$element = $( this.element.nativeElement );\n\t\tthis.nodesTab = this.$element.find( \".tabular.bnodes.menu\" ).tab();\n\t}\n\n\tngOnChanges( changes:{[propName:string]:SimpleChange} ):void {\n\t\tif( ( changes[ \"bNodes\" ].currentValue !== changes[ \"bNodes\" ].previousValue ) ) {\n\t\t\tthis.openedBNodes = [];\n\t\t\tthis.goToBNode( \"all\" );\n\t\t\tthis.bNodesChanges.clear();\n\t\t}\n\t}\n\n\tgetPropertiesName( property:any ):string[] {\n\t\treturn Object.keys( property );\n\t}\n\n\tnotifyDocumentBNodeHasChanged( records:BlankNodeRecords, bNode:RDFNode.Class ) {\n\t\tif( typeof records === \"undefined\" || records === null ) {\n\t\t\tthis.bNodesChanges.delete( bNode[ \"@id\" ] );\n\t\t\tthis.onChanges.emit( this.bNodesChanges );\n\t\t\treturn;\n\t\t}\n\t\tif( records.changes.size > 0 || records.additions.size > 0 || records.deletions.size > 0 ) {\n\t\t\tthis.bNodesChanges.set( bNode[ \"@id\" ], records );\n\t\t} else {\n\t\t\tthis.bNodesChanges.delete( bNode[ \"@id\" ] );\n\t\t}\n\t\tthis.onChanges.emit( this.bNodesChanges );\n\t}\n\n\topenBNode( nodeOrId:RDFNode.Class|string ):void {\n\t\tlet node:RDFNode.Class;\n\t\tif( typeof nodeOrId === \"string\" ) {\n\t\t\tnode = this.bNodes.find( ( node )=> { return node[ \"@id\" ] === nodeOrId} );\n\t\t} else {\n\t\t\tnode = nodeOrId;\n\t\t}\n\t\tif( this.openedBNodes.indexOf( node ) === - 1 ) this.openedBNodes.push( node );\n\t\tsetTimeout( () => {\n\t\t\tthis.refreshTabs();\n\t\t\tthis.goToBNode( \"bnode\" + node[ \"@id\" ] );\n\t\t}, 50 );\n\t}\n\n\topenNamedFragment( id:string ):void {\n\t\tthis.onOpenNamedFragment.emit( id );\n\t}\n\n\tgoToBNode( id:string ) {\n\t\tif( ! this.nodesTab ) return;\n\t\tthis.nodesTab.find( \"> [data-tab='\" + id + \"']\" ).click();\n\t\tthis.onOpenBNode.emit( \"bNodes\" );\n\t}\n\n\tcloseBNode( bNode:RDFNode.Class ):void {\n\t\tlet idx:number = this.openedBNodes.indexOf( bNode );\n\t\tthis.openedBNodes.splice( idx, 1 );\n\t\tthis.goToBNode( \"all\" );\n\t\tif( this.bNodesChanges.has( bNode[ \"@id\" ] ) )this.notifyDocumentBNodeHasChanged( null, bNode );\n\t}\n\n\trefreshTabs():void {\n\t\tthis.nodesTab.find( \">.item\" ).tab();\n\t}\n}\n\nexport default BlankNodesComponent;"],"sourceRoot":"/source/"}