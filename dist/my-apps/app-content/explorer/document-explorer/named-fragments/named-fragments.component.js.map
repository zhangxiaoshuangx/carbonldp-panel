{"version":3,"sources":["my-apps/app-content/explorer/document-explorer/named-fragments/named-fragments.component.ts"],"names":[],"mappings":"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","file":"my-apps/app-content/explorer/document-explorer/named-fragments/named-fragments.component.js","sourcesContent":["import { Component, ElementRef, Input, Output, EventEmitter, SimpleChange, OnChanges, AfterContentInit } from \"@angular/core\";\n\nimport * as RDFNode from \"carbonldp/RDF/RDFNode\";\nimport * as URI from \"carbonldp/RDF/URI\";\n\nimport { NamedFragmentComponent } from \"./named-fragment.component\"\nimport { NamedFragmentRecords } from \"./named-fragment.component\"\nimport { PropertyComponent } from \"./../property/property.component\";\n\nimport $ from \"jquery\";\nimport \"semantic-ui/semantic\";\n\nimport template from \"./named-fragments.component.html!\";\nimport style from \"./named-fragments.component.css!text\";\n\n@Component( {\n\tselector: \"cp-named-fragments\",\n\ttemplate: template,\n\tstyles: [ style ],\n\tdirectives: [ PropertyComponent, NamedFragmentComponent ],\n} )\n\nexport class NamedFragmentsComponent implements AfterContentInit, OnChanges {\n\n\telement:ElementRef;\n\t$element:JQuery;\n\n\tnodesTab:JQuery;\n\topenedNamedFragments:RDFNode.Class[] = [];\n\tnamedFragmentsChanges:Map<string, NamedFragmentRecords> = new Map<string, NamedFragmentRecords>();\n\n\t@Input() bNodes:RDFNode.Class[] = [];\n\t@Input() namedFragments:RDFNode.Class[] = [];\n\t@Input() documentURI:string = \"\";\n\n\t@Output() onChanges:EventEmitter<Map<string, NamedFragmentRecords>> = new EventEmitter<Map<string, NamedFragmentRecords>>();\n\t@Output() onOpenBNode:EventEmitter<string> = new EventEmitter<string>();\n\t@Output() onOpenNamedFragment:EventEmitter<string> = new EventEmitter<string>();\n\n\tconstructor( element:ElementRef ) {\n\t\tthis.element = element;\n\t}\n\n\tngAfterContentInit():void {\n\t\tthis.$element = $( this.element.nativeElement );\n\t\tthis.nodesTab = this.$element.find( \".tabular.namedfragments.menu\" ).tab();\n\t}\n\n\tngOnChanges( changes:{[propName:string]:SimpleChange} ):void {\n\t\tif( ( changes[ \"namedFragments\" ].currentValue !== changes[ \"namedFragments\" ].previousValue ) ) {\n\t\t\tthis.openedNamedFragments = [];\n\t\t\tthis.goToNamedFragment( \"all-namedFragments\" );\n\t\t}\n\t}\n\n\tgetPropertiesName( property:any ):string[] {\n\t\treturn Object.keys( property );\n\t}\n\n\tnotifyNamedFragmentHasChanged( records:NamedFragmentRecords, namedFragment:RDFNode.Class ) {\n\t\tif( typeof records === \"undefined\" || records === null ) {\n\t\t\tthis.namedFragmentsChanges.delete( namedFragment[ \"@id\" ] );\n\t\t\tthis.onChanges.emit( this.namedFragmentsChanges );\n\t\t\treturn;\n\t\t}\n\t\tif( records.changes.size > 0 || records.additions.size > 0 || records.deletions.size > 0 ) {\n\t\t\tthis.namedFragmentsChanges.set( namedFragment[ \"@id\" ], records );\n\t\t} else {\n\t\t\tthis.namedFragmentsChanges.delete( namedFragment[ \"@id\" ] );\n\t\t}\n\t\tthis.onChanges.emit( this.namedFragmentsChanges );\n\t}\n\n\topenNamedFragment( nodeOrId:RDFNode.Class|string ):void {\n\t\tlet node:RDFNode.Class;\n\t\tif( typeof nodeOrId === \"string\" ) {\n\t\t\tnode = this.namedFragments.find( ( node )=> { return node[ \"@id\" ] === nodeOrId} );\n\t\t} else {\n\t\t\tnode = nodeOrId;\n\t\t}\n\t\tif( this.openedNamedFragments.indexOf( node ) === - 1 )this.openedNamedFragments.push( node );\n\t\tsetTimeout( () => {\n\t\t\tthis.refreshTabs();\n\t\t\tthis.goToNamedFragment( \"namedfragment_\" + this.getNormalizedUri( node[ \"@id\" ] ) );\n\t\t}, 50 );\n\t}\n\n\topenBNode( id:string ):void {\n\t\tthis.onOpenBNode.emit( id );\n\t}\n\n\tgoToNamedFragment( id:string ) {\n\t\tif( ! this.nodesTab )\n\t\t\treturn;\n\t\tthis.nodesTab.find( \"> [data-tab='\" + id + \"']\" ).click();\n\t\tthis.onOpenNamedFragment.emit( \"namedFragments\" );\n\t}\n\n\tcloseNamedFragment( namedFragment:RDFNode.Class ):void {\n\t\tlet idx:number = this.openedNamedFragments.indexOf( namedFragment );\n\t\tthis.openedNamedFragments.splice( idx, 1 );\n\t\tthis.goToNamedFragment( \"all-namedFragments\" );\n\t\tif( this.namedFragmentsChanges.has( namedFragment[ \"@id\" ] ) )this.notifyNamedFragmentHasChanged( null, namedFragment );\n\t}\n\n\trefreshTabs():void {\n\t\tthis.nodesTab.find( \">.item\" ).tab();\n\t}\n\n\tgetNormalizedUri( uri:string ):string {\n\t\treturn uri.replace( /[^\\w\\s]/gi, \"\" );\n\t}\n\n\tgetSlug( uri:string ) {\n\t\treturn URI.Util.getSlug( uri );\n\t}\n\n}\n\nexport default NamedFragmentsComponent;"],"sourceRoot":"/source/"}