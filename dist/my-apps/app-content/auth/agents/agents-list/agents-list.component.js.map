{"version":3,"sources":["my-apps/app-content/auth/agents/agents-list/agents-list.component.ts"],"names":[],"mappings":"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","file":"agents-list.component.js","sourcesContent":["import { Component, Input, OnInit } from \"@angular/core\";\nimport { Router, ActivatedRoute, NavigationExtras } from \"@angular/router\";\n\nimport * as App from \"carbonldp/App\";\nimport * as Agent from \"carbonldp/Auth/Agent\";\nimport * as PersistedAgent from \"carbonldp/Auth/PersistedAgent\";\nimport * as URI from \"carbonldp/RDF/URI\";\n\nimport { AgentsService } from \"../agents.service\";\nimport { Modes as AgentDetailsModes } from \"../agent-details/agent-details.component\";\nimport { Message } from \"carbonldp-panel/errors-area/error-message.component\";\nimport { ErrorMessageGenerator } from \"carbonldp-panel/errors-area/error-message-generator\";\n\nimport template from \"./agents-list.component.html!\";\nimport style from \"./agents-list.component.css!text\";\n\n@Component( {\n\tselector: \"cp-agents-list\",\n\ttemplate: template,\n\tstyles: [ style ],\n} )\n\nexport class AgentsListComponent implements OnInit {\n\n\tprivate router:Router;\n\tprivate route:ActivatedRoute;\n\tprivate agentsService:AgentsService;\n\n\tprivate agents:PersistedAgent.Class[] = [];\n\tprivate loading:boolean = false;\n\tprivate deletingAgent:Agent.Class;\n\tprivate activePage:number = 0;\n\tprivate totalAgents:number = 0;\n\tprivate agentsPerPage:number = 5;\n\n\tprivate headers:Header[] = [ { name: \"Name\", value: \"name\" }, { name: \"Created\", value: \"created\" }, { name: \"Modified\", value: \"modified\" } ];\n\tprivate sortedColumn:string = \"name\";\n\tprivate ascending:boolean = false;\n\tprivate errorMessage:Message;\n\n\t@Input() appContext:App.Context;\n\n\n\tconstructor( router:Router, route:ActivatedRoute, agentsService:AgentsService ) {\n\t\tthis.router = router;\n\t\tthis.route = route;\n\t\tthis.agentsService = agentsService;\n\t}\n\n\tngOnInit():void {\n\t\tthis.loadAgents();\n\t}\n\n\tprivate loadAgents():void {\n\t\tthis.loading = true;\n\t\tthis.getNumberOfAgents().then( ( amount:number ) => {\n\t\t\tthis.totalAgents = amount;\n\t\t\treturn this.getAgents();\n\t\t} ).then( ( agents:PersistedAgent.Class[] ) => {\n\t\t\tthis.agents = agents;\n\t\t} ).catch( ( error ) => {\n\t\t\tconsole.error( error );\n\t\t\tthis.errorMessage = ErrorMessageGenerator.getErrorMessage( error );\n\t\t} ).then( () => {\n\t\t\tthis.loading = false;\n\t\t} );\n\t}\n\n\tprivate getAgents():Promise<PersistedAgent.Class[]> {\n\t\treturn this.agentsService.getAll( this.appContext, this.agentsPerPage, this.activePage, this.sortedColumn, this.ascending ).then( ( agents:PersistedAgent.Class[] ) => {\n\t\t\treturn agents.filter( ( agent:PersistedAgent.Class ) => { return agent.id.indexOf( \"/agents/me/\" ) === - 1 } );\n\t\t} );\n\t}\n\n\tprivate openAgent( event:Event, agent:PersistedAgent.Class ):void {\n\t\tevent.stopPropagation();\n\t\tthis.goToAgent( agent );\n\t}\n\n\tprivate onClickEditAgent( event:Event, agent:PersistedAgent.Class ):void {\n\t\tevent.stopPropagation();\n\t\tthis.goToAgent( agent, true );\n\t}\n\n\tprivate goToAgent( agent:PersistedAgent.Class, edit?:boolean ):void {\n\t\tlet slug:string = URI.Util.getSlug( agent.id );\n\t\tlet extras:NavigationExtras = { relativeTo: this.route };\n\t\tif( edit ) extras.queryParams = { mode: AgentDetailsModes.EDIT };\n\t\tthis.router.navigate( [ slug ], extras );\n\t}\n\n\tprivate refreshAgents():void {\n\t\tthis.loadAgents();\n\t}\n\n\tprivate onClickDeleteAgent( event:Event, agent:Agent.Class ):void {\n\t\tevent.stopPropagation();\n\t\tthis.deletingAgent = agent;\n\t}\n\n\tprivate getNumberOfAgents():Promise<number> {\n\t\treturn this.agentsService.getNumberOfAgents( this.appContext );\n\t}\n\n\tprivate changePage( page:number ):void {\n\t\tthis.activePage = page;\n\t\tthis.loadAgents();\n\t}\n\n\tprivate changeAgentsPerPage( agentsPerPage:number ) {\n\t\tthis.agentsPerPage = agentsPerPage;\n\t\tthis.loadAgents();\n\t}\n\n\tprivate sortColumn( header:Header ):void {\n\t\tif( this.sortedColumn === header.value ) this.ascending = ! this.ascending;\n\t\tthis.sortedColumn = header.value;\n\t\tthis.loadAgents();\n\t}\n}\n\nexport interface Header {\n\tname:string;\n\tvalue:string;\n}\n\nexport default AgentsListComponent;\n"]}