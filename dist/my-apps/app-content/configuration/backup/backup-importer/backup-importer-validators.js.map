{"version":3,"sources":["my-apps/app-content/configuration/backup/backup-importer/backup-importer-validators.ts"],"names":[],"mappings":";;;;;;;;;;AAAA,qBAA2D,eAAe,CAAC,CAAA;AAC3E,sBAAqE,gBAAgB,CAAC,CAAA;AAOtF;IAAA;IAcA,CAAC;IAVA,yCAAW,GAAX,UAAa,OAAqB;QACjC,IAAI,CAAC,cAAc,GAAG,OAAO,CAAE,gBAAgB,CAAE,CAAC,YAAY,CAAC;QAC/D,IAAI,CAAC,OAAO,CAAC,OAAO,CAAC,sBAAsB,CAAE,KAAK,EAAE,IAAI,CAAE,CAAC;IAC5D,CAAC;IAED,sCAAQ,GAAR,UAAU,OAAuB;QAChC,EAAE,CAAA,CAAE,CAAE,CAAE,IAAI,CAAC,cAAc,IAAI,IAAI,CAAC,cAAc,CAAC,IAAI,KAAK,iBAAkB,CAAC;YAAC,MAAM,CAAC,IAAI,CAAC;QAC5F,EAAE,CAAA,CAAE,CAAE,IAAI,CAAC,cAAe,CAAC;YAAC,MAAM,CAAC,EAAE,iBAAiB,EAAE,IAAI,EAAE,CAAC;QAC/D,MAAM,CAAC,EAAE,yBAAyB,EAAE,IAAI,EAAE,CAAC;IAC5C,CAAC;IAZD;QAAC,YAAK,EAAE;;+DAAA;IACR;QAAC,YAAK,EAAE;;wDAAA;IAPT;QAAC,gBAAS,CAAE;YACX,QAAQ,EAAE,kBAAkB;YAC5B,SAAS,EAAE,CAAE,EAAE,OAAO,EAAE,qBAAa,EAAE,WAAW,EAAE,mBAAmB,EAAE,KAAK,EAAE,IAAI,EAAE,CAAE;SACxF,CAAE;;2BAAA;IAgBH,0BAAC;AAAD,CAdA,AAcC,IAAA;AAdY,2BAAmB,sBAc/B,CAAA;AAED,gIAAgI;AAKhI;IAAA;IAQA,CAAC;IANA,2CAAQ,GAAR,UAAU,SAAmB;QAC5B,GAAG,CAAA,CAAE,IAAI,OAAO,IAAI,SAAS,CAAC,QAAS,CAAC,CAAC,CAAC;YACzC,EAAE,CAAA,CAAE,CAAE,CAAE,SAAS,CAAC,QAAQ,CAAE,OAAO,CAAE,CAAC,KAAM,CAAC;gBAAC,MAAM,CAAC,IAAI,CAAC;QAC3D,CAAC;QACD,MAAM,CAAC,EAAE,aAAa,EAAE,IAAI,EAAE,CAAC;IAChC,CAAC;IAXF;QAAC,gBAAS,CAAE;YACX,QAAQ,EAAE,wBAAwB;YAClC,SAAS,EAAE,CAAE,EAAE,OAAO,EAAE,qBAAa,EAAE,WAAW,EAAE,wBAAwB,EAAE,KAAK,EAAE,IAAI,EAAE,CAAE;SAC7F,CAAE;;gCAAA;IASH,+BAAC;AAAD,CARA,AAQC,IAAA;AARY,gCAAwB,2BAQpC,CAAA","file":"backup-importer-validators.js","sourcesContent":["import { Directive, Input, OnChanges, SimpleChanges } from \"@angular/core\";\nimport { AbstractControl, Validator, NG_VALIDATORS, FormGroup } from \"@angular/forms\";\n\n@Directive( {\n\tselector: \"[cp-backup-file]\",\n\tproviders: [ { provide: NG_VALIDATORS, useExisting: BackupFileValidator, multi: true } ]\n} )\n\nexport class BackupFileValidator implements Validator, OnChanges {\n\t@Input() backupFileBlob;\n\t@Input() control;\n\n\tngOnChanges( changes:SimpleChanges ) {\n\t\tthis.backupFileBlob = changes[ \"backupFileBlob\" ].currentValue;\n\t\tthis.control.control.updateValueAndValidity( false, true );\n\t}\n\n\tvalidate( control:AbstractControl ):any {\n\t\tif( ! ! this.backupFileBlob && this.backupFileBlob.type === \"application/zip\" ) return null;\n\t\tif( ! this.backupFileBlob ) return { \"emptyBackupFile\": true };\n\t\treturn { \"invalidBackupFileFormat\": true };\n\t}\n}\n\n// Checks all controls. If at least one is valid, then no errors are found, if none are valid then \"invalidForm\" error is added.\n@Directive( {\n\tselector: \"[cp-import-form-valid]\",\n\tproviders: [ { provide: NG_VALIDATORS, useExisting: AtLeastOneValidValidator, multi: true } ]\n} )\nexport class AtLeastOneValidValidator implements Validator {\n\n\tvalidate( formGroup:FormGroup ):{ [key:string]:any; } {\n\t\tfor( let control in formGroup.controls ) {\n\t\t\tif( ! ! formGroup.controls[ control ].valid ) return null;\n\t\t}\n\t\treturn { \"invalidForm\": true };\n\t}\n}"]}