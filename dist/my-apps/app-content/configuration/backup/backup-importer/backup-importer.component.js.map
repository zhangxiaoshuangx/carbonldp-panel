{"version":3,"sources":["my-apps/app-content/configuration/backup/backup-importer/backup-importer.component.ts"],"names":[],"mappings":"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","file":"my-apps/app-content/configuration/backup/backup-importer/backup-importer.component.js","sourcesContent":["import { Component, ElementRef, Input, OnInit, OnDestroy } from \"@angular/core\";\n\nimport * as App from \"carbonldp/App\";\nimport * as Response from \"carbonldp/HTTP/Response\";\nimport * as PersistedDocument from \"carbonldp/PersistedDocument\";\nimport * as Pointer from \"carbonldp/Pointer\";\nimport { Error as HTTPError } from \"carbonldp/HTTP/Errors\";\n\nimport { BackupsService } from \"../backups.service\";\nimport { JobsService } from \"../../job/jobs.service\";\nimport * as Job from \"../../job/job\";\nimport { Message } from \"./../../../../../errors-area/error-message.component\";\n\nimport $ from \"jquery\";\nimport \"semantic-ui/semantic\";\n\nimport template from \"./backup-importer.component.html!\";\nimport style from \"./backup-importer.component.css!text\";\n\n@Component( {\n\tselector: \"cp-backup-importer\",\n\ttemplate: template,\n\tstyles: [ style ],\n} )\n\nexport class BackupImporterComponent implements OnInit, OnDestroy {\n\t@Input() appContext:App.Context;\n\n\telement:ElementRef;\n\t$element:JQuery;\n\t$importForm:JQuery;\n\t$backups:JQuery;\n\tmonitorExecutionInterval:number;\n\n\timportFormModel:{ uri:string, backup:string, backupFile:string } = {\n\t\turi: \"\",\n\t\tbackup: \"\",\n\t\tbackupFile: \"\",\n\t};\n\tbackupFileBlob:Blob;\n\tbackupFileArray:any[] = [];\n\n\tbackups:PersistedDocument.Class[] = [];\n\tbackupsService:BackupsService;\n\tjobsService:JobsService;\n\n\trunning:ImportStatus = new ImportStatus();\n\tuploading:ImportStatus = new ImportStatus();\n\tcreating:ImportStatus = new ImportStatus();\n\texecuting:ImportStatus = new ImportStatus();\n\terrorMessages:Message[] = [];\n\terrorMessage:Message;\n\n\tconstructor( element:ElementRef, backupsService:BackupsService, jobsService:JobsService ) {\n\t\tthis.element = element;\n\t\tthis.backupsService = backupsService;\n\t\tthis.jobsService = jobsService;\n\t}\n\n\tngOnInit():void {\n\t\tthis.$element = $( this.element.nativeElement );\n\t\tthis.$backups = this.$element.find( \"select.backups\" );\n\t\tthis.$importForm = this.$element.find( \"form.importForm\" );\n\t\tthis.getBackups();\n\t}\n\n\n\tgetBackups():void {\n\t\tthis.backupsService.getAll( this.appContext ).then( ( [backups, response]:[PersistedDocument.Class[], Response.Class] )=> {\n\t\t\tthis.backups = backups.sort( ( a:any, b:any ) => b.modified < a.modified ? - 1 : b.modified > a.modified ? 1 : 0 );\n\t\t} )\n\t}\n\n\tonImportBackup( form:any ):void {\n\t\tlet uri = form.form.controls.uri;\n\t\tlet backup = form.form.controls.backup;\n\t\tlet backupFile = form.form.controls.backupFile;\n\t\tthis.running.start();\n\t\tif( uri.valid )this.createBackupImport( uri.value );\n\t\tif( backup.valid )this.createBackupImport( backup.value );\n\t\tif( backupFile.valid )this.uploadBackup( this.backupFileBlob );\n\t}\n\n\texecuteImport( importJob:PersistedDocument.Class ):Promise<PersistedDocument.Class> {\n\t\treturn this.jobsService.runJob( importJob );\n\t}\n\n\tmonitorExecution( importJobExecution:PersistedDocument.Class ):Promise<PersistedDocument.Class> {\n\t\treturn new Promise<PersistedDocument.Class>( ( resolve:( result:any ) => void, reject:( error:HTTPError|PersistedDocument.Class ) => void ) => {\n\t\t\t// Node typings are overriding setInterval, that's why we need to cast it to any before assigning it to a number variable\n\t\t\tthis.monitorExecutionInterval = <any>setInterval( ()=> {\n\t\t\t\tthis.checkImportJobExecution( importJobExecution ).then( ()=> {\n\t\t\t\t\tif( this.executing.done ) {\n\t\t\t\t\t\tclearInterval( this.monitorExecutionInterval );\n\t\t\t\t\t\tresolve( importJobExecution );\n\t\t\t\t\t}\n\t\t\t\t} );\n\t\t\t}, 3000 );\n\t\t} );\n\t}\n\n\tngOnDestroy():void {\n\t\tif( typeof this.monitorExecutionInterval !== \"undefined\" ) clearInterval( this.monitorExecutionInterval );\n\t}\n\n\tprivate checkImportJobExecution( importJobExecution:PersistedDocument.Class ):Promise<any> {\n\t\treturn this.jobsService.checkJobExecution( importJobExecution ).then( ( execution )=> {\n\t\t\tif( ! execution[ Job.Execution.STATUS ] ) return Promise.reject( execution );\n\t\t\tif( execution[ Job.Execution.STATUS ].id === Job.ExecutionStatus.FINISHED ) this.executing.success();\n\t\t\tif( execution[ Job.Execution.STATUS ].id === Job.ExecutionStatus.ERROR ) {\n\t\t\t\tthis.executing.fail();\n\t\t\t\tlet errorMessage:Message = <Message>{\n\t\t\t\t\ttitle: \"Error while executing import\",\n\t\t\t\t\tcontent: \"An error occurred while executing your import backup job. Please, fix your job configuration.\",\n\t\t\t\t\tstatusMessage: execution[ Job.Execution.ERROR_DESCRIPTION ]\n\t\t\t\t};\n\t\t\t\tthis.errorMessages.push( errorMessage );\n\t\t\t}\n\t\t} ).catch( ( error:HTTPError )=> {\n\t\t\tconsole.error( error );\n\t\t\tthis.executing.fail();\n\t\t\tlet errorMessage:Message;\n\t\t\tif( error.response ) errorMessage = this.getHTTPErrorMessage( error, \"Couldn't monitor the import execution.\" );\n\t\t\telse {\n\t\t\t\terrorMessage = <Message>{\n\t\t\t\t\ttitle: error.name,\n\t\t\t\t\tcontent: JSON.stringify( error )\n\t\t\t\t};\n\t\t\t}\n\t\t\tthis.errorMessages.push( errorMessage );\n\t\t} )\n\t}\n\n\tonFileChange( event ):void {\n\t\tvar files:FileList = event.srcElement.files;\n\t\tthis.backupFileBlob = files[ 0 ];\n\t\t// this.backupFileArray = [this.backupFileBlob, control ]\n\t}\n\n\tonInputLostFocus( control:any ):void {\n\t\tswitch ( control.name ) {\n\t\t\tcase \"uri\":\n\t\t\t\tif( control.valid ) {\n\t\t\t\t\tthis.$element.find( \"[ ng-reflect-name ='backup']\" ).prop( \"disabled\", true );\n\t\t\t\t\tthis.$element.find( \"[ ng-reflect-name ='backupFile']\" ).prop( \"disabled\", true );\n\t\t\t\t} else { this.enableAllInputs() }\n\t\t\t\tbreak;\n\t\t\tcase \"backup\":\n\t\t\t\tif( control.valid ) {\n\t\t\t\t\tthis.$element.find( \"[ ng-reflect-name ='uri']\" ).prop( \"disabled\", true );\n\t\t\t\t\tthis.$element.find( \"[ ng-reflect-name ='backupFile']\" ).prop( \"disabled\", true );\n\t\t\t\t} else { this.enableAllInputs() }\n\t\t\t\tbreak;\n\t\t\tcase \"backupFile\":\n\t\t\t\tif( ! ! this.backupFileBlob ) {\n\t\t\t\t\tthis.$element.find( \"[ ng-reflect-name ='uri']\" ).prop( \"disabled\", true );\n\t\t\t\t\tthis.$element.find( \"[ ng-reflect-name='backup']\" ).prop( \"disabled\", true );\n\t\t\t\t} else { this.enableAllInputs() }\n\t\t\t\tbreak;\n\t\t}\n\t}\n\n\tenableAllInputs():void {\n\t\tthis.$element.find( \"[ng-reflect-name='uri']\" ).prop( \"disabled\", false );\n\t\tthis.$element.find( \"[ng-reflect-name='backup']\" ).prop( \"disabled\", false );\n\t\tthis.$element.find( \"[ng-reflect-name='backupFile']\" ).prop( \"disabled\", false );\n\t}\n\n\tcanDisplayImportButtonLoading():boolean {\n\t\treturn this.uploading.active ? true : this.creating.active ? true : this.executing.active ? true : false;\n\t}\n\n\tuploadBackup( file:Blob ):void {\n\t\tthis.uploading.start();\n\t\tthis.backupsService.upload( file, this.appContext ).then(\n\t\t\t( [pointer, response]:[ Pointer.Class, Response.Class ] )=> {\n\t\t\t\tthis.uploading.success();\n\t\t\t\tthis.createBackupImport( pointer.id );\n\t\t\t}\n\t\t).catch( ( error:HTTPError )=> {\n\t\t\tconsole.error( error );\n\t\t\tthis.uploading.fail();\n\t\t\tlet errorMessage:Message;\n\t\t\tif( error.response ) errorMessage = this.getHTTPErrorMessage( error, \"Couldn't upload the file.\" );\n\t\t\telse {\n\t\t\t\terrorMessage = <Message>{\n\t\t\t\t\ttitle: error.name,\n\t\t\t\t\tcontent: JSON.stringify( error )\n\t\t\t\t};\n\t\t\t}\n\t\t\tthis.errorMessages.push( errorMessage );\n\t\t} );\n\t}\n\n\tcreateBackupImport( backupURI:string ):Promise<any> {\n\t\tthis.creating.start();\n\t\treturn this.jobsService.createImportBackup( backupURI, this.appContext ).then( ( importJob:PersistedDocument.Class )=> {\n\t\t\tthis.creating.success();\n\t\t\tthis.executing.start();\n\t\t\treturn this.executeImport( importJob ).then( ( importJobExecution:PersistedDocument.Class )=> {this.monitorExecution( importJobExecution );}\n\t\t\t).catch( ( error:HTTPError )=> {\n\t\t\t\tconsole.error( error );\n\t\t\t\tthis.executing.fail();\n\t\t\t\tlet errorMessage:Message;\n\t\t\t\tif( error.response ) errorMessage = this.getHTTPErrorMessage( error, \"Couldn't monitor the import execution.\" );\n\t\t\t\telse {\n\t\t\t\t\terrorMessage = <Message>{\n\t\t\t\t\t\ttitle: error.name,\n\t\t\t\t\t\tcontent: JSON.stringify( error )\n\t\t\t\t\t};\n\t\t\t\t}\n\t\t\t\tthis.errorMessages.push( errorMessage );\n\t\t\t} );\n\t\t} ).catch( ( error:HTTPError )=> {\n\t\t\tconsole.error( error );\n\t\t\tthis.creating.fail();\n\t\t\tlet errorMessage:Message;\n\t\t\tif( ! ! error.response ) errorMessage = this.getHTTPErrorMessage( error, \"The importing job couldn't be created.\" );\n\t\t\telse {\n\t\t\t\terrorMessage = <Message>{\n\t\t\t\t\ttitle: error.name,\n\t\t\t\t\tcontent: JSON.stringify( error )\n\t\t\t\t};\n\t\t\t}\n\t\t\tthis.errorMessages.push( errorMessage );\n\t\t} );\n\t}\n\n\tprivate getHTTPErrorMessage( error:HTTPError, content:string ):Message {\n\t\treturn {\n\t\t\ttitle: error.name,\n\t\t\tcontent: content + \" Reason: \" + error.message,\n\t\t\tendpoint: (<any>error.response.request).responseURL,\n\t\t\tstatusCode: \"\" + (<XMLHttpRequest>error.response.request).status + \" - RequestID: \" + error.requestID,\n\t\t\tstatusMessage: (<XMLHttpRequest>error.response.request).statusText\n\t\t};\n\t}\n\n\tfinishImport():void {\n\t\tthis.uploading = new ImportStatus();\n\t\tthis.creating = new ImportStatus();\n\t\tthis.executing = new ImportStatus();\n\t\tthis.running = new ImportStatus();\n\t\tthis.getBackups();\n\t\tthis.errorMessages = [];\n\t}\n\n\tcheckForFailedTasks():boolean {\n\t\treturn this.uploading.failed ? true : this.creating.failed ? true : this.executing.failed ? true : false;\n\t}\n\n\tremoveMessage( index:number ):void {\n\t\tthis.errorMessages.splice( index, 1 );\n\t}\n}\n\nexport class ImportStatus {\n\tprivate _active:boolean;\n\tprivate _done:boolean;\n\tprivate _failed:boolean;\n\tprivate _succeed:boolean;\n\n\tget active():boolean { return this._active; }\n\n\tget done():boolean { return this._done; }\n\n\tget failed():boolean { return this._failed; }\n\n\tget succeed():boolean { return this._succeed; }\n\n\tset active( value:boolean ) {\n\t\tthis._active = value;\n\t\tthis._done = ! value;\n\t}\n\n\tset done( value:boolean ) {\n\t\tthis._done = value;\n\t\tthis._active = ! value;\n\t}\n\n\tset failed( value:boolean ) {\n\t\tthis.done = true;\n\t\tthis._failed = value;\n\t\tthis._succeed = ! value;\n\t}\n\n\tset succeed( value:boolean ) {\n\t\tthis.done = true;\n\t\tthis._failed = ! value;\n\t\tthis._succeed = value;\n\t}\n\n\tstart():void {\n\t\tthis.active = true;\n\t}\n\n\tfinish():void {\n\t\tthis.done = true;\n\t}\n\n\tfail():void {\n\t\tthis.failed = true;\n\t}\n\n\tsuccess():void {\n\t\tthis.succeed = true;\n\t}\n}\nexport default BackupImporterComponent;"],"sourceRoot":"/source/"}