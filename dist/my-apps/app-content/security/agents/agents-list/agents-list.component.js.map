{"version":3,"sources":["my-apps/app-content/security/agents/agents-list/agents-list.component.ts"],"names":[],"mappings":"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","file":"agents-list.component.js","sourcesContent":["import { Component, Input, OnInit } from \"@angular/core\";\nimport { Router, ActivatedRoute, NavigationExtras } from \"@angular/router\";\n\nimport * as App from \"carbonldp/App\";\nimport * as Agent from \"carbonldp/Auth/Agent\";\nimport * as PersistedAgent from \"carbonldp/Auth/PersistedAgent\";\nimport * as URI from \"carbonldp/RDF/URI\";\n\nimport { AgentsService } from \"../agents.service\";\nimport { Modes as AgentDetailsModes } from \"../agent-details/agent-details.component\";\nimport { Message } from \"carbonldp-panel/errors-area/error-message.component\";\nimport { ErrorMessageGenerator } from \"carbonldp-panel/errors-area/error-message-generator\";\n\n\n@Component( {\n\tselector: \"cp-agents-list\",\n\ttemplate: require( \"./agents-list.component.html\" ),\n\tstyles: [ require( \"./agents-list.component.css\" ) ],\n} )\n\nexport class AgentsListComponent implements OnInit {\n\n\tprivate router:Router;\n\tprivate route:ActivatedRoute;\n\tprivate agentsService:AgentsService;\n\n\tprivate agents:PersistedAgent.Class[] = [];\n\tprivate loading:boolean = false;\n\tprivate deletingAgent:Agent.Class;\n\tprivate activePage:number = 0;\n\tprivate totalAgents:number = 0;\n\tprivate agentsPerPage:number = 5;\n\n\tprivate headers:Header[] = [ { name: \"Name\", value: \"name\" }, { name: \"Created\", value: \"created\" }, { name: \"Modified\", value: \"modified\" } ];\n\tprivate sortedColumn:string = \"name\";\n\tprivate ascending:boolean = false;\n\tprivate errorMessage:Message;\n\n\t@Input() appContext:App.Context;\n\n\n\tconstructor( router:Router, route:ActivatedRoute, agentsService:AgentsService ) {\n\t\tthis.router = router;\n\t\tthis.route = route;\n\t\tthis.agentsService = agentsService;\n\t}\n\n\tngOnInit():void {\n\t\tthis.loadAgents();\n\t}\n\n\tprivate loadAgents():void {\n\t\tthis.loading = true;\n\t\tthis.getNumberOfAgents().then( ( amount:number ) => {\n\t\t\tthis.totalAgents = amount;\n\t\t\treturn this.getAgents();\n\t\t} ).then( ( agents:PersistedAgent.Class[] ) => {\n\t\t\tthis.agents = agents;\n\t\t} ).catch( ( error ) => {\n\t\t\tconsole.error( error );\n\t\t\tthis.errorMessage = ErrorMessageGenerator.getErrorMessage( error );\n\t\t} ).then( () => {\n\t\t\tthis.loading = false;\n\t\t} );\n\t}\n\n\tprivate getAgents():Promise<PersistedAgent.Class[]> {\n\t\treturn this.agentsService.getAll( this.appContext, this.agentsPerPage, this.activePage, this.sortedColumn, this.ascending ).then( ( agents:PersistedAgent.Class[] ) => {\n\t\t\treturn agents.filter( ( agent:PersistedAgent.Class ) => { return agent.id.indexOf( \"/agents/me/\" ) === - 1 } );\n\t\t} );\n\t}\n\n\tprivate openAgent( event:Event, agent:PersistedAgent.Class ):void {\n\t\tevent.stopPropagation();\n\t\tthis.goToAgent( agent );\n\t}\n\n\tprivate onClickEditAgent( event:Event, agent:PersistedAgent.Class ):void {\n\t\tevent.stopPropagation();\n\t\tthis.goToAgent( agent, true );\n\t}\n\n\tprivate goToAgent( agent:PersistedAgent.Class, edit?:boolean ):void {\n\t\tlet slug:string = URI.Util.getSlug( agent.id );\n\t\tlet extras:NavigationExtras = { relativeTo: this.route };\n\t\tif( edit ) extras.queryParams = { mode: AgentDetailsModes.EDIT };\n\t\tthis.router.navigate( [ slug ], extras );\n\t}\n\n\tprivate refreshAgents():void {\n\t\tthis.loadAgents();\n\t}\n\n\tprivate onClickDeleteAgent( event:Event, agent:Agent.Class ):void {\n\t\tevent.stopPropagation();\n\t\tthis.deletingAgent = agent;\n\t}\n\n\tprivate getNumberOfAgents():Promise<number> {\n\t\treturn this.agentsService.getNumberOfAgents( this.appContext );\n\t}\n\n\tprivate changePage( page:number ):void {\n\t\tthis.activePage = page;\n\t\tthis.loadAgents();\n\t}\n\n\tprivate changeAgentsPerPage( agentsPerPage:number ) {\n\t\tthis.agentsPerPage = agentsPerPage;\n\t\tthis.loadAgents();\n\t}\n\n\tprivate sortColumn( header:Header ):void {\n\t\tif( this.sortedColumn === header.value ) this.ascending = ! this.ascending;\n\t\tthis.sortedColumn = header.value;\n\t\tthis.loadAgents();\n\t}\n}\n\nexport interface Header {\n\tname:string;\n\tvalue:string;\n}\n\nexport default AgentsListComponent;\n"]}