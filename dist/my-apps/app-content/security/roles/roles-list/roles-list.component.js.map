{"version":3,"sources":["my-apps/app-content/security/roles/roles-list/roles-list.component.ts"],"names":[],"mappings":"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","file":"roles-list.component.js","sourcesContent":["import { Component, Input, Output, EventEmitter, OnInit } from \"@angular/core\";\nimport { Router, ActivatedRoute, NavigationExtras } from \"@angular/router\";\n\nimport * as App from \"carbonldp/App\";\nimport * as Role from \"carbonldp/Auth/Role\";\nimport * as PersistedRole from \"carbonldp/Auth/PersistedRole\";\nimport * as URI from \"carbonldp/RDF/URI\";\n\nimport { RolesService } from \"../roles.service\";\n// import { Modes as AgentDetailsModes } from \"../agent-details/agent-details.component\";\nimport { Message } from \"carbonldp-panel/errors-area/error-message.component\";\nimport { ErrorMessageGenerator } from \"carbonldp-panel/errors-area/error-message-generator\";\n\nimport template from \"./roles-list.component.html!\";\nimport style from \"./roles-list.component.css!text\";\n\n@Component( {\n\tselector: \"cp-roles-list\",\n\ttemplate: template,\n\tstyles: [ style ],\n} )\n\nexport class RolesListComponent implements OnInit {\n\n\tprivate router:Router;\n\tprivate route:ActivatedRoute;\n\tprivate rolesService:RolesService;\n\n\tprivate roles:PersistedRole.Class[] = [];\n\tprivate _loading:boolean = false;\n\tprivate set loading( value:boolean ) {\n\t\tthis._loading = value;\n\t\tthis.onLoading.emit( this.loading );\n\t};\n\n\tprivate get loading() {\n\t\treturn this._loading;\n\t};\n\n\tprivate deletingRole:Role.Class;\n\tprivate activePage:number = 0;\n\tprivate totalRoles:number = 0;\n\tprivate rolesPerPage:number = 5;\n\n\tprivate headers:Header[] = [ { name: \"Name\", value: \"name\" }, { name: \"Created\", value: \"created\" }, { name: \"Modified\", value: \"modified\" } ];\n\tprivate sortedColumn:string = \"name\";\n\tprivate ascending:boolean = false;\n\tprivate errorMessage:Message;\n\n\t@Input() appContext:App.Context;\n\t@Input() refresher:EventEmitter<boolean>;\n\n\t@Output() onLoading:EventEmitter<boolean> = new EventEmitter();\n\n\n\tconstructor( router:Router, route:ActivatedRoute, rolesService:RolesService ) {\n\t\tthis.router = router;\n\t\tthis.route = route;\n\t\tthis.rolesService = rolesService;\n\t}\n\n\tngOnInit():void {\n\t\tthis.refresher.subscribe( ( canRefresh:boolean ) => {\n\t\t\tif( canRefresh ) this.loadRoles();\n\t\t} );\n\t\tthis.loadRoles();\n\t}\n\n\tprivate loadRoles():void {\n\t\tthis.loading = true;\n\t\tthis.getNumberOfRoles().then( ( amount:number ) => {\n\t\t\tthis.totalRoles = amount;\n\t\t\treturn this.getRoles();\n\t\t} ).then( ( roles:PersistedRole.Class[] ) => {\n\t\t\tthis.roles = roles;\n\t\t} ).catch( ( error ) => {\n\t\t\tconsole.error( error );\n\t\t\tthis.errorMessage = ErrorMessageGenerator.getErrorMessage( error );\n\t\t} ).then( () => {\n\t\t\tthis.loading = false;\n\t\t} );\n\t}\n\n\tprivate getRoles():Promise<PersistedRole.Class[]> {\n\t\treturn this.rolesService.getAll( this.appContext, this.rolesPerPage, this.activePage, this.sortedColumn, this.ascending );\n\t}\n\n\tprivate openRole( event:Event, role:PersistedRole.Class ):void {\n\t\tevent.stopPropagation();\n\t\tthis.goToRole( role );\n\t}\n\n\tprivate onClickEditRole( event:Event, role:PersistedRole.Class ):void {\n\t\tevent.stopPropagation();\n\t\tthis.goToRole( role, true );\n\t}\n\n\tprivate goToRole( role:PersistedRole.Class, edit?:boolean ):void {\n\t\tlet slug:string = URI.Util.getSlug( role.id );\n\t\tlet extras:NavigationExtras = { relativeTo: this.route };\n\t\tif( edit ) extras.queryParams = { mode: RoleDetailsModes.EDIT };\n\t\tthis.router.navigate( [ slug ], extras );\n\t}\n\n\tprivate refreshRoles():void {\n\t\tthis.loadRoles();\n\t}\n\n\tprivate onClickDeleteRole( event:Event, role:Role.Class ):void {\n\t\tevent.stopPropagation();\n\t\tthis.deletingRole = role;\n\t}\n\n\tprivate getNumberOfRoles():Promise<number> {\n\t\treturn this.rolesService.getNumberOfRoles( this.appContext );\n\t}\n\n\tprivate changePage( page:number ):void {\n\t\tthis.activePage = page;\n\t\tthis.loadRoles();\n\t}\n\n\tprivate changeRolesPerPage( rolesPerPage:number ) {\n\t\tthis.rolesPerPage = rolesPerPage;\n\t\tthis.loadRoles();\n\t}\n\n\tprivate sortColumn( header:Header ):void {\n\t\tif( this.sortedColumn === header.value ) this.ascending = ! this.ascending;\n\t\tthis.sortedColumn = header.value;\n\t\tthis.loadRoles();\n\t}\n}\n\nexport interface Header {\n\tname:string;\n\tvalue:string;\n}\n\nexport class RoleDetailsModes {\n\tstatic READ:string = \"READ\";\n\tstatic EDIT:string = \"EDIT\";\n\tstatic CREATE:string = \"CREATE\";\n}\n\nexport default RolesListComponent;\n"]}