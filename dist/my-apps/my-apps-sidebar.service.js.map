{"version":3,"sources":["my-apps/my-apps-sidebar.service.ts"],"names":[],"mappings":"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","file":"my-apps-sidebar.service.js","sourcesContent":["import { Injectable, EventEmitter } from \"@angular/core\";\nimport { Router } from \"@angular/router\";\nimport { RouterService } from \"carbonldp-panel/router.service\";\n\nimport { SidebarService, SidebarGroup, SidebarDivider, SidebarSubmenu } from \"./../sidebar.service\";\n\nimport * as App from \"./app-content/app\";\n\n@Injectable()\nexport class MyAppsSidebarService {\n\n\t// TODO: Find a more native approach to make this work with different routing levels 'website.com/app-dev/my-apps/slug/...' and 'workbench.com/my-apps/slug/...'\n\tprivate base:string = \"\";\n\tprivate router:Router;\n\tprivate routerService:RouterService;\n\tprivate sidebarService:SidebarService;\n\tprivate openAppsGroup:SidebarGroup;\n\tprivate openApps:Map<App.Class, SidebarSubmenu> = new Map<App.Class, SidebarSubmenu>();\n\tprivate openAppsDivider:SidebarDivider = {\n\t\ttype: \"divider\",\n\t\tname: \"Open Apps\",\n\t\ticon: \"cubes icon\",\n\t\tindex: 0,\n\t};\n\n\tconstructor( router:Router, routerService:RouterService, sidebarService:SidebarService ) {\n\t\tthis.router = router;\n\t\tthis.routerService = routerService;\n\t\tthis.sidebarService = sidebarService;\n\t\tthis.base = this.sidebarService.base;\n\t\tthis.init();\n\t}\n\n\tinit():void {\n\t\tif( typeof this.openAppsGroup !== \"undefined\" && this.sidebarService.items.findIndex( ( item ) => item === this.openAppsGroup ) !== - 1 ) return;\n\t\tthis.openApps.clear();\n\t\tthis.openAppsGroup = {\n\t\t\ttype: \"group\",\n\t\t\tchildren: [],\n\t\t\tindex: 100,\n\t\t};\n\t\tthis.sidebarService.addItem( this.openAppsGroup );\n\t}\n\n\taddApp( app:App.Class ):void {\n\t\tif( this.openApps.has( app ) ) return;\n\t\tif( this.openApps.size === 0 ) this.addOpenAppsDivider();\n\n\t\tlet removeAppEmitter:EventEmitter<SidebarGroup> = new EventEmitter<SidebarGroup>();\n\t\tremoveAppEmitter.subscribe( () => {\n\t\t\tthis.removeApp( app );\n\t\t} );\n\n\t\tlet appSubmenu:SidebarSubmenu = {\n\t\t\ttype: \"submenu\",\n\t\t\tname: app.name,\n\t\t\tcloseable: true,\n\t\t\tonClose: removeAppEmitter,\n\t\t\tchildren: [\n\t\t\t\t{\n\t\t\t\t\ttype: \"link\",\n\t\t\t\t\tname: \"Dashboard\",\n\t\t\t\t\ticon: \"bar chart icon\",\n\t\t\t\t\troute: [ this.base, \"my-apps\", app.slug ],\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\ttype: \"link\",\n\t\t\t\t\tname: \"Document Explorer\",\n\t\t\t\t\ticon: \"list layout icon\",\n\t\t\t\t\troute: [ this.base, \"my-apps\", app.slug, \"explore\" ],\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\ttype: \"link\",\n\t\t\t\t\tname: \"SPARQL Client\",\n\t\t\t\t\ticon: \"terminal icon\",\n\t\t\t\t\troute: [ this.base, \"my-apps\", app.slug, \"sparql-client\" ],\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\ttype: \"link\",\n\t\t\t\t\tname: \"Security\",\n\t\t\t\t\ticon: \"lock icon\",\n\t\t\t\t\troute: [ this.base, \"my-apps\", app.slug, \"security\", \"agents\" ],\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\ttype: \"link\",\n\t\t\t\t\tname: \"Configuration\",\n\t\t\t\t\ticon: \"settings icon\",\n\t\t\t\t\troute: [ this.base, \"my-apps\", app.slug, \"configure\" ],\n\t\t\t\t},\n\t\t\t]\n\t\t};\n\t\tthis.openAppsGroup.children.push( appSubmenu );\n\t\tthis.openApps.set( app, appSubmenu );\n\t}\n\n\topenApp( app:App.Class ):void {\n\t\tif( ! this.openApps.has( app ) ) return;\n\n\t\tlet appSubmenu:SidebarSubmenu = this.openApps.get( app );\n\t\tappSubmenu.open = true;\n\t}\n\n\tcloseApp( app:App.Class ):void {\n\t\tif( ! this.openApps.has( app ) ) return;\n\n\t\tlet appSubmenu:SidebarSubmenu = this.openApps.get( app );\n\t\tappSubmenu.open = false;\n\t}\n\n\tremoveApp( app:App.Class ):void {\n\t\tif( ! this.openApps.has( app ) ) return;\n\n\t\tlet appSubmenu:SidebarSubmenu = this.openApps.get( app );\n\t\tthis.openAppsGroup.children.splice( this.openAppsGroup.children.indexOf( appSubmenu ), 1 );\n\t\tthis.openApps.delete( app );\n\n\t\tif( this.openApps.size === 0 ) this.removeOpenAppsDivider();\n\t\tif( this.routerService.isActive( [ \"my-apps\", app.slug ], false ) ) this.router.navigate( [ \"my-apps\" ] );\n\t}\n\n\tprivate addOpenAppsDivider():void {\n\t\tthis.openAppsGroup.children.push( this.openAppsDivider );\n\t}\n\n\tprivate removeOpenAppsDivider():void {\n\t\tthis.openAppsGroup.children.splice( this.openAppsGroup.children.indexOf( this.openAppsDivider ), 1 );\n\t}\n}\n\nexport default MyAppsSidebarService;\n"]}