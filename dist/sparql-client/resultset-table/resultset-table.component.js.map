{"version":3,"sources":["sparql-client/resultset-table/resultset-table.component.ts"],"names":[],"mappings":"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","file":"resultset-table.component.js","sourcesContent":["import { Component, Input, Output, SimpleChange, EventEmitter, OnChanges } from \"@angular/core\";\n\nimport \"semantic-ui/semantic\";\n\nimport template from \"./resultset-table.component.html!\";\nimport style from \"./resultset-table.component.css!text\";\n\n@Component( {\n\tselector: \"cp-resultset-table\",\n\ttemplate: template,\n\tstyles: [ style ],\n} )\n\nexport class ResultsetTableComponent implements OnChanges {\n\t@Input() query:any;\n\t@Input() resultset:any;\n\t@Input() prefixes:{ [ prefix:string ]:string };\n\t@Output() resultsetChange:EventEmitter<any> = new EventEmitter();\n\n\tsortedColumn:string = null;\n\tascending:boolean = false;\n\n\tbindings:any;\n\n\tconstructor() {}\n\n\tngOnChanges( changeRecord:any ):void {\n\t\tif( \"resultset\" in changeRecord ) {\n\t\t\tlet change:SimpleChange = changeRecord.resultset;\n\t\t\tif( change.currentValue !== change.previousValue ) {\n\t\t\t\tthis.bindings = this.mapBindings( change.currentValue );\n\t\t\t}\n\t\t}\n\t}\n\n\tsortColumn( columnName:string ):void {\n\t\tif( this.sortedColumn === columnName ) this.ascending = ! this.ascending;\n\t\tthis.sortedColumn = columnName;\n\n\t\tlet index:number = this.resultset.head.vars.indexOf( columnName );\n\t\tthis.bindings.sort( ( bindingA, bindingB ) => {\n\t\t\tif( ! bindingA[ index ] )return this.ascending ? 1 : - 1;\n\t\t\tif( ! bindingB[ index ] )return this.ascending ? - 1 : 1;\n\t\t\tif( bindingA[ index ].value > bindingB[ index ].value ) return this.ascending ? - 1 : 1;\n\t\t\tif( bindingA[ index ].value < bindingB[ index ].value ) return this.ascending ? 1 : - 1;\n\t\t\treturn 0;\n\t\t} );\n\t}\n\n\tprivate mapBindings( resultset:any ):any {\n\t\treturn resultset.results.bindings.map( ( bindingObject ) => {\n\t\t\tlet bindingArray:any = [];\n\t\t\tfor( let varName of resultset.head.vars ) {\n\t\t\t\tbindingArray.push( bindingObject[ varName ] );\n\t\t\t}\n\t\t\treturn bindingArray;\n\t\t} );\n\t}\n}\n\nexport default ResultsetTableComponent;\n"]}