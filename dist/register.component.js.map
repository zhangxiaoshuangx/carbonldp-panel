{"version":3,"sources":["register.component.ts"],"names":[],"mappings":"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","file":"register.component.js","sourcesContent":["import { Component, ElementRef, Output, Inject, EventEmitter, OnInit } from \"@angular/core\";\n\nimport * as HTTP from \"carbonldp/HTTP\";\n\nimport { AuthService } from \"angular2-carbonldp/services\";\n\nimport * as $ from \"jquery\";\nimport \"semantic-ui/semantic\";\n\n@Component( {\n\tselector: \"cp-register\",\n\ttemplate: require( \"./register.component.html\" ),\n\tstyles: [],\n} )\nexport class RegisterComponent implements OnInit {\n\t@Output( \"onRegister\" ) onRegister:EventEmitter<any> = new EventEmitter<any>();\n\n\tprivate element:ElementRef;\n\tprivate $element:JQuery;\n\tprivate authService:AuthService.Class;\n\n\tprivate sending:boolean = false;\n\tregister:{ name:string, email:string, password:string, repeatPassword:string, profileId:string } = {\n\t\tname: \"\",\n\t\temail: \"\",\n\t\tpassword: \"\",\n\t\trepeatPassword: \"\",\n\t\tprofileId: \"\"\n\t};\n\n\tprivate errorMessage:string = \"\";\n\n\tconstructor( element:ElementRef, @Inject( AuthService.Token ) authService:AuthService.Class ) {\n\t\tthis.element = element;\n\t\tthis.authService = authService;\n\t}\n\n\tngOnInit():void {\n\t\tthis.$element = $( this.element.nativeElement );\n\t}\n\n\tonSubmit( form, $event:any ):void {\n\t\t$event.preventDefault();\n\n\t\tthis.sending = true;\n\t\tthis.errorMessage = \"\";\n\n\t\tif( ! form.valid ) {\n\t\t\tthis.shakeForm();\n\t\t\tthis.sending = false;\n\t\t\treturn;\n\t\t}\n\n\t\tlet name:string = form.controls.name.value;\n\t\tlet username:string = form.controls.email.value;\n\t\tlet password:string = form.controls.password.value;\n\t\tlet profileId:string = form.controls.profileId.value;\n\n\t\tif( ! profileId ) profileId = void 0;\n\n\t\tthis.authService.register( name, username, password, profileId ).then( () => {\n\t\t\tthis.sending = false;\n\t\t\tthis.onRegister.emit( null );\n\t\t} ).catch( ( error:any ) => {\n\t\t\tthis.sending = false;\n\t\t\tthis.setErrorMessage( error );\n\t\t} );\n\t}\n\n\tsanitize( evt:any ):void {\n\t\tif( typeof evt.target !== \"undefined\" ) {\n\t\t\tlet slug:string = evt.target.value;\n\t\t\tif( slug ) {\n\t\t\t\tslug = slug.toLowerCase().replace( / - | -|- /g, \"-\" ).replace( /[^-\\w ]+/g, \"\" ).replace( / +/g, \"-\" );\n\t\t\t\tif( slug.charAt( slug.length - 1 ) !== \"/\" ) slug += \"/\";\n\t\t\t\tthis.register.profileId = slug;\n\t\t\t}\n\t\t}\n\t}\n\n\tshakeForm():void {\n\t\tlet target:JQuery = this.$element;\n\t\ttarget.transition( {\n\t\t\tanimation: \"shake\",\n\t\t} );\n\t}\n\n\tsetErrorMessage( error:HTTP.Errors.Error ):void {\n\t\tif( typeof error.message !== \"undefined\" ) this.errorMessage = error.message;\n\t\telse switch( true ) {\n\t\t\tcase error instanceof HTTP.Errors.ConflictError:\n\t\t\t\tthis.errorMessage = \"That email is already in use\";\n\t\t\t\tbreak;\n\t\t\tcase error instanceof HTTP.Errors.ForbiddenError:\n\t\t\t\tthis.errorMessage = \"Denied Access\";\n\t\t\t\tbreak;\n\t\t\tcase error instanceof HTTP.Errors.UnauthorizedError:\n\t\t\t\tthis.errorMessage = \"Wrong credentials\";\n\t\t\t\tbreak;\n\t\t\tcase error instanceof HTTP.Errors.BadGatewayError:\n\t\t\t\tthis.errorMessage = \"An error occurred while trying to login. Please try again later. Error: \" + error.response.status;\n\t\t\t\tbreak;\n\t\t\tcase error instanceof HTTP.Errors.GatewayTimeoutError:\n\t\t\t\tthis.errorMessage = \"An error occurred while trying to login. Please try again later. Error: \" + error.response.status;\n\t\t\t\tbreak;\n\t\t\tcase error instanceof HTTP.Errors.InternalServerErrorError:\n\t\t\t\tthis.errorMessage = \"An error occurred while trying to login. Please try again later. Error: \" + error.response.status;\n\t\t\t\tbreak;\n\t\t\tcase error instanceof HTTP.Errors.UnknownError:\n\t\t\t\tthis.errorMessage = \"An error occurred while trying to login. Please try again later. Error: \" + error.response.status;\n\t\t\t\tbreak;\n\t\t\tcase error instanceof HTTP.Errors.ServiceUnavailableError:\n\t\t\t\tthis.errorMessage = \"Service currently unavailable\";\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tif( \"response\" in error ) {\n\t\t\t\t\tthis.errorMessage = \"There was a problem processing the request. Error: \" + error.response.status;\n\t\t\t\t} else {\n\t\t\t\t\tthis.errorMessage = \"There was a problem processing the request\";\n\t\t\t\t\tconsole.error( error );\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t}\n\t}\n}\n\nexport default RegisterComponent;\n"]}