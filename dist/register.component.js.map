{"version":3,"sources":["register.component.ts"],"names":[],"mappings":"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","file":"register.component.js","sourcesContent":["import { Component, ElementRef, Output, Inject, EventEmitter, OnInit } from \"@angular/core\";\n\n// import { FormBuilder, ControlGroup, AbstractControl, Validators, Control } from \"@angular/common/src/forms-deprecated\";\nimport * as HTTP from \"carbonldp/HTTP\";\n\nimport { AuthService } from \"angular2-carbonldp/services\";\n\n// import { EmailValidator, SameAsValidator } from \"carbonldp-panel/custom-validators\";\n\nimport $ from \"jquery\";\nimport \"semantic-ui/semantic\";\n\nimport template from \"./register.component.html!\"\n\n@Component( {\n\tselector: \"cp-register\",\n\ttemplate: template,\n\tstyles: [],\n} )\nexport class RegisterComponent implements OnInit {\n\t@Output( \"onRegister\" ) onRegister:EventEmitter<any> = new EventEmitter<any>();\n\n\tprivate element:ElementRef;\n\tprivate $element:JQuery;\n\t// private formBuilder:FormBuilder;\n\tprivate authService:AuthService.Class;\n\n\tprivate sending:boolean = false;\n\t// private registerForm:ControlGroup;\n\t// private controls:{\n\t// \tname?:AbstractControl,\n\t// \temail?:AbstractControl,\n\t// \tpassword?:AbstractControl,\n\t// \trepeatPassword?:AbstractControl,\n\t// \tprofileId?:AbstractControl,\n\t// } = {};\n\tregister:{ name:string, email:string, password:string, repeatPassword:string, profileId:string} = {\n\t\tname: \"\",\n\t\temail: \"\",\n\t\tpassword: \"\",\n\t\trepeatPassword: \"\",\n\t\tprofileId: \"\"\n\t};\n\n\tprivate errorMessage:string = \"\";\n\n\t// constructor( element:ElementRef, formBuilder:FormBuilder, @Inject( AuthService.Token ) authService:AuthService.Class ) {\n\tconstructor( element:ElementRef, @Inject( AuthService.Token ) authService:AuthService.Class ) {\n\t\tthis.element = element;\n\t\t// this.formBuilder = formBuilder;\n\t\tthis.authService = authService;\n\t}\n\n\tngOnInit():void {\n\t\tthis.$element = $( this.element.nativeElement );\n\n\t\t// this.registerForm = this.formBuilder.group( {\n\t\t// \tname: [ \"\", Validators.compose( [ Validators.required ] ) ],\n\t\t// \temail: [ \"\", Validators.compose( [ Validators.required, EmailValidator ] ) ],\n\t\t// \tpassword: [ \"\", Validators.compose( [ Validators.required ] ) ],\n\t\t// \tprofileId: [ \"\", Validators.compose( [] ) ],\n\t\t// } );\n\t\t//\n\t\t// this.controls.name = this.registerForm.controls[ \"name\" ];\n\t\t// this.controls.email = this.registerForm.controls[ \"email\" ];\n\t\t// this.controls.password = this.registerForm.controls[ \"password\" ];\n\t\t// this.controls.profileId = this.registerForm.controls[ \"profileId\" ];\n\t\t//\n\t\t// this.controls.repeatPassword = this.formBuilder.control( \"\", Validators.compose( [ Validators.required, SameAsValidator( this.controls.password ) ] ) );\n\t\t// this.registerForm.addControl( \"repeatPassword\", this.controls.repeatPassword );\n\t\t//\n\t\t//\n\n\t\t//todo: evaluate the use of profileId subscription\n\t\t// let valueCopy:string = \"\";\n\t\t// this.controls.profileId.valueChanges.subscribe( ( value:string )=> {\n\t\t// \tvalueCopy = this.getSanitizedSlug( value );\n\t\t// \tif( value !== valueCopy )(<Control>this.controls.profileId).updateValue( valueCopy );\n\t\t// } );\n\t}\n\n\tonSubmit( form, $event:any ):void {\n\t\t$event.preventDefault();\n\n\t\tthis.sending = true;\n\t\tthis.errorMessage = \"\";\n\n\t\t// this.touchControls();\n\n\t\tif( ! form.valid ) {\n\t\t\tthis.shakeForm();\n\t\t\tthis.sending = false;\n\t\t\treturn;\n\t\t}\n\n\t\tlet name:string = form.name;\n\t\tlet username:string = form.email;\n\t\tlet password:string = form.password;\n\t\tlet profileId:string = form.profileId;\n\n\t\tif( ! profileId ) profileId = void 0;\n\n\t\t// this.authService.register( name, username, password, profileId ).then( () => {\n\t\t// \tthis.sending = false;\n\t\t// \tthis.onRegister.emit( null );\n\t\t// } ).catch( ( error:any ) => {\n\t\t// \tthis.sending = false;\n\t\t// \tthis.setErrorMessage( error );\n\t\t// } );\n\t}\n\n\tgetSanitizedSlug( slug:string ):void {\n\t\tthis.register.profileId = slug.toLowerCase().replace( / - | -|- /g, \"-\" ).replace( /[^-\\w ]+/g, \"\" ).replace( / +/g, \"-\" );\n\t}\n\n\t// touchControls():void {\n\t// \tfor( let controlName in this.controls ) {\n\t// \t\tif( ! this.controls.hasOwnProperty( controlName ) ) continue;\n\t//\n\t// \t\tlet control:AbstractControl = this.controls[ controlName ];\n\t// \t\tcontrol.markAsTouched();\n\t// \t}\n\t// }\n\n\tshakeForm():void {\n\t\tlet target:JQuery = this.$element;\n\t\ttarget.transition( {\n\t\t\tanimation: \"shake\",\n\t\t} );\n\t}\n\n\tsetErrorMessage( error:HTTP.Errors.Error ):void {\n\t\tif( typeof error.message !== \"undefined\" ) this.errorMessage = error.message;\n\t\telse switch( true ) {\n\t\t\tcase error instanceof HTTP.Errors.ConflictError:\n\t\t\t\tthis.errorMessage = \"That email is already in use\";\n\t\t\t\tbreak;\n\t\t\tcase error instanceof HTTP.Errors.ForbiddenError:\n\t\t\t\tthis.errorMessage = \"Denied Access\";\n\t\t\t\tbreak;\n\t\t\tcase error instanceof HTTP.Errors.UnauthorizedError:\n\t\t\t\tthis.errorMessage = \"Wrong credentials\";\n\t\t\t\tbreak;\n\t\t\tcase error instanceof HTTP.Errors.BadGatewayError:\n\t\t\t\tthis.errorMessage = \"An error occurred while trying to login. Please try again later. Error: \" + error.response.status;\n\t\t\t\tbreak;\n\t\t\tcase error instanceof HTTP.Errors.GatewayTimeoutError:\n\t\t\t\tthis.errorMessage = \"An error occurred while trying to login. Please try again later. Error: \" + error.response.status;\n\t\t\t\tbreak;\n\t\t\tcase error instanceof HTTP.Errors.InternalServerErrorError:\n\t\t\t\tthis.errorMessage = \"An error occurred while trying to login. Please try again later. Error: \" + error.response.status;\n\t\t\t\tbreak;\n\t\t\tcase error instanceof HTTP.Errors.UnknownError:\n\t\t\t\tthis.errorMessage = \"An error occurred while trying to login. Please try again later. Error: \" + error.response.status;\n\t\t\t\tbreak;\n\t\t\tcase error instanceof HTTP.Errors.ServiceUnavailableError:\n\t\t\t\tthis.errorMessage = \"Service currently unavailable\";\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tif( \"response\" in error ) {\n\t\t\t\t\tthis.errorMessage = \"There was a problem processing the request. Error: \" + error.response.status;\n\t\t\t\t} else {\n\t\t\t\t\tthis.errorMessage = \"There was a problem processing the request\";\n\t\t\t\t\tconsole.error( error );\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t}\n\t}\n}\n\nexport default RegisterComponent;\n"],"sourceRoot":"/source/"}