{"version":3,"sources":["register.component.ts"],"names":[],"mappings":"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","file":"register.component.js","sourcesContent":["import { Component, ElementRef, Output, Inject, EventEmitter, OnInit } from \"@angular/core\";\n\nimport * as HTTP from \"carbonldp/HTTP\";\n\nimport { AuthService } from \"angular2-carbonldp/services\";\n\nimport $ from \"jquery\";\nimport \"semantic-ui/semantic\";\n\nimport template from \"./register.component.html!\"\n\n@Component( {\n\tselector: \"cp-register\",\n\ttemplate: template,\n\tstyles: [],\n} )\nexport class RegisterComponent implements OnInit {\n\t@Output( \"onRegister\" ) onRegister:EventEmitter<any> = new EventEmitter<any>();\n\n\tprivate element:ElementRef;\n\tprivate $element:JQuery;\n\tprivate authService:AuthService.Class;\n\n\tprivate sending:boolean = false;\n\tregister:{ name:string, email:string, password:string, repeatPassword:string, profileId:string} = {\n\t\tname: \"\",\n\t\temail: \"\",\n\t\tpassword: \"\",\n\t\trepeatPassword: \"\",\n\t\tprofileId: \"\"\n\t};\n\n\tprivate errorMessage:string = \"\";\n\n\tconstructor( element:ElementRef, @Inject( AuthService.Token ) authService:AuthService.Class ) {\n\t\tthis.element = element;\n\t\tthis.authService = authService;\n\t}\n\n\tngOnInit():void {\n\t\tthis.$element = $( this.element.nativeElement );\n\t}\n\n\tonSubmit( form, $event:any ):void {\n\t\t$event.preventDefault();\n\n\t\tthis.sending = true;\n\t\tthis.errorMessage = \"\";\n\n\t\tif( ! form.valid ) {\n\t\t\tthis.shakeForm();\n\t\t\tthis.sending = false;\n\t\t\treturn;\n\t\t}\n\n\t\tlet name:string = form.controls.name.value;\n\t\tlet username:string = form.controls.email.value;\n\t\tlet password:string = form.controls.password.value;\n\t\tlet profileId:string = form.controls.profileId.value;\n\n\t\tif( ! profileId ) profileId = void 0;\n\n\t\tthis.authService.register( name, username, password, profileId ).then( () => {\n\t\t\tthis.sending = false;\n\t\t\tthis.onRegister.emit( null );\n\t\t} ).catch( ( error:any ) => {\n\t\t\tthis.sending = false;\n\t\t\tthis.setErrorMessage( error );\n\t\t} );\n\t}\n\n\tsanitize( evt:any ):void {\n\t\tif( typeof evt.target !== \"undefined\" ) {\n\t\t\tlet slug:string = evt.target.value;\n\t\t\tif( slug ) {\n\t\t\t\tslug = slug.toLowerCase().replace( / - | -|- /g, \"-\" ).replace( /[^-\\w ]+/g, \"\" ).replace( / +/g, \"-\" );\n\t\t\t\tif( slug.charAt( slug.length - 1 ) !== \"/\" ) slug += \"/\";\n\t\t\t\tthis.register.profileId = slug;\n\t\t\t}\n\t\t}\n\t}\n\n\tshakeForm():void {\n\t\tlet target:JQuery = this.$element;\n\t\ttarget.transition( {\n\t\t\tanimation: \"shake\",\n\t\t} );\n\t}\n\n\tsetErrorMessage( error:HTTP.Errors.Error ):void {\n\t\tif( typeof error.message !== \"undefined\" ) this.errorMessage = error.message;\n\t\telse switch ( true ) {\n\t\t\tcase error instanceof HTTP.Errors.ConflictError:\n\t\t\t\tthis.errorMessage = \"That email is already in use\";\n\t\t\t\tbreak;\n\t\t\tcase error instanceof HTTP.Errors.ForbiddenError:\n\t\t\t\tthis.errorMessage = \"Denied Access\";\n\t\t\t\tbreak;\n\t\t\tcase error instanceof HTTP.Errors.UnauthorizedError:\n\t\t\t\tthis.errorMessage = \"Wrong credentials\";\n\t\t\t\tbreak;\n\t\t\tcase error instanceof HTTP.Errors.BadGatewayError:\n\t\t\t\tthis.errorMessage = \"An error occurred while trying to login. Please try again later. Error: \" + error.response.status;\n\t\t\t\tbreak;\n\t\t\tcase error instanceof HTTP.Errors.GatewayTimeoutError:\n\t\t\t\tthis.errorMessage = \"An error occurred while trying to login. Please try again later. Error: \" + error.response.status;\n\t\t\t\tbreak;\n\t\t\tcase error instanceof HTTP.Errors.InternalServerErrorError:\n\t\t\t\tthis.errorMessage = \"An error occurred while trying to login. Please try again later. Error: \" + error.response.status;\n\t\t\t\tbreak;\n\t\t\tcase error instanceof HTTP.Errors.UnknownError:\n\t\t\t\tthis.errorMessage = \"An error occurred while trying to login. Please try again later. Error: \" + error.response.status;\n\t\t\t\tbreak;\n\t\t\tcase error instanceof HTTP.Errors.ServiceUnavailableError:\n\t\t\t\tthis.errorMessage = \"Service currently unavailable\";\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tif( \"response\" in error ) {\n\t\t\t\t\tthis.errorMessage = \"There was a problem processing the request. Error: \" + error.response.status;\n\t\t\t\t} else {\n\t\t\t\t\tthis.errorMessage = \"There was a problem processing the request\";\n\t\t\t\t\tconsole.error( error );\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t}\n\t}\n}\n\nexport default RegisterComponent;\n"],"sourceRoot":"/source/"}