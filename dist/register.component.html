<form #registerForm="ngForm" class="ui form attached segment large" role="form">
	<div class="field" [ngClass]="{ error: ( name.touched && ! name.valid ) }">
		<div class="ui left icon input">
			<i class="user icon"></i>
			<input type="text" name="name" placeholder="Name" [(ngModel)]="register.name" required #name="ngModel">
		</div>
	</div>
	<div class="field" [ngClass]="{ error: ( email.touched && ! email.valid ) }">
		<div class="ui left icon input">
			<i class="mail icon"></i>
			<!--<input type="text" name="email" placeholder="E-mail address" ngControl="email">-->
			<input class="field email"
			       type="text"
			       placeholder="E-mail address"
			       name="email"
			       [(ngModel)]="register.email"
			       required email
			       #email="ngModel">
		</div>
	</div>
	<div class="field" [ngClass]="{ error: ( password.touched && ! password.valid ) }">
		<div class="ui left icon input">
			<i class="lock icon"></i>
			<!--<input type="password" name="password" placeholder="Password" ngControl="password">-->
			<input class="field email"
			       type="text"
			       placeholder="E-mail address"
			       name="password"
			       [(ngModel)]="register.password"
			       required
			       #password="ngModel">
		</div>
	</div>
	<div class="field" [ngClass]="{ error: ( repeatPassword.touched && ! repeatPassword.valid ) }">
		<div class="ui left icon input">
			<i class="lock icon"></i>
			<!--<input type="password" name="repeatPassword" placeholder="Repeat password" ngControl="repeatPassword">-->
			<input class="field email"
			       type="text"
			       placeholder="E-mail address"
			       name="repeatPassword"
			       [(ngModel)]="register.repeatPassword"
			       [matchTo]="register.password"
			       [control]="repeatPassword"
			       required match
			       #repeatPassword="ngModel">
		</div>
	</div>
	<div class="field" [ngClass]="{ error: ( profileId.touched && ! profileId.valid ) }" title="A short way to identify your profile">
		<div class="ui left icon input">
			<i class="user icon"></i>
			<input type="text" name="profileId" placeholder="Profile ID, E.g. my-agent-name (Optional)"
			[(ngModel)]="register.profileId" #profileId="ngModel" slug (input)="getSanitizedSlug(profileId.value)">
		</div>
	</div>
	<button type="submit"
	        [ngClass]="{ loading: sending }"
	        class="ui fluid large submit button"
	        [disabled]=" !registerForm.valid || sending "
	        (click)="onSubmit( registerForm, $event )">
		Register
	</button>
</form>
<div class="ui bottom attached errors message" *ngIf="registerForm.valid"><!-- *ngIf="-->
	<!--( controls.name.touched && ! controls.name.valid ) ||-->
	<!--( controls.email.touched && ! controls.email.valid ) ||-->
	<!--( controls.password.touched && ! controls.password.valid ) ||-->
	<!--( controls.repeatPassword.touched && ! controls.repeatPassword.valid ) ||-->
	<!--( controls.profileId.touched && ! controls.profileId.valid ) ||-->
	<!--( !! errorMessage)-->
<!--">-->

	<ul class="list">
		<li *ngIf="email.control.hasError( 'required')">The email is required.</li>
		<li *ngIf="!email.control.hasError( 'required') && email.control.hasError('invalidEmailAddress')">Enter a valid email address</li>

		<li *ngIf="password.control.hasError( 'required' )">The password is required.</li>
		<li *ngIf="! password.control.hasError( 'required' ) && password.control.hasError( 'invalidPassword' )">The password is invalid</li>

		<li *ngIf="repeatPassword.control.hasError( 'required' )">Please repeat your password.</li>
		<li *ngIf="! repeatPassword.control.hasError( 'required' ) && repeatPassword.control.hasError( 'matchError' )">The passwords don't match</li>
<!--todo: analyze profileId role on registration-->
		<!--<li *ngIf="profileId.hasError( 'required' )">Please enter your profile id.</li>-->
		<!--<li *ngIf="! profileId.hasError( 'required' ) && profileId.hasError( 'invalidProfileId' )">The profile id is invalid, only alphanumerics and dashes.</li>-->

		<li *ngIf="!! errorMessage">{{errorMessage}}</li>
	</ul>
</div>