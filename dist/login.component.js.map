{"version":3,"sources":["login.component.ts"],"names":[],"mappings":"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","file":"login.component.js","sourcesContent":["import { Component, ElementRef, Input, Output, Inject, EventEmitter, OnInit } from \"@angular/core\";\n\nimport { AuthService } from \"angular2-carbonldp/services\";\n\nimport Credentials from \"carbonldp/Auth/Credentials\";\nimport * as HTTP from \"carbonldp/HTTP\";\n\nimport $ from \"jquery\";\nimport \"semantic-ui/semantic\";\n\n@Component( {\n\tselector: \"cp-login\",\n\ttemplateUrl: \"./login.component.html\",\n\tstyles: [ \":host { display:block; } \" ],\n} )\nexport class LoginComponent implements OnInit {\n\t@Input( \"container\" ) container:string|JQuery;\n\t@Output( \"onLogin\" ) onLogin:EventEmitter<Credentials> = new EventEmitter<Credentials>();\n\n\telement:ElementRef;\n\n\t$element:JQuery;\n\t$loginForm:JQuery;\n\n\tsending:boolean = false;\n\terrorMessage:string = \"\";\n\n\tlogin:{ email:string, password:string, rememberMe:boolean } =\n\t\t{\n\t\t\temail: \"\",\n\t\t\tpassword: \"\",\n\t\t\trememberMe: false\n\t\t};\n\n\tprivate authService:AuthService.Class;\n\n\tconstructor( element:ElementRef, @Inject( AuthService.Token ) authService:AuthService.Class ) {\n\t\tthis.element = element;\n\t\tthis.authService = authService;\n\t}\n\n\tngOnInit():void {\n\t\tthis.$element = $( this.element.nativeElement );\n\t\tthis.$loginForm = this.$element.find( \"form.login\" );\n\t\tthis.$loginForm.find( \".ui.checkbox\" ).checkbox();\n\t}\n\n\tonSubmit( data:{ email:string, password:string, rememberMe:boolean }, $event:any ):void {\n\t\t$event.preventDefault();\n\t\tthis.sending = true;\n\t\tthis.errorMessage = \"\";\n\n\t\tlet username:string = data.email;\n\t\tlet password:string = data.password;\n\t\tlet rememberMe:boolean = ! ! data.rememberMe;\n\n\t\tthis.authService.login( username, password, rememberMe ).then( ( credentials:Credentials ) => {\n\t\t\tthis.sending = false;\n\t\t\tthis.onLogin.emit( credentials );\n\t\t} ).catch( ( error:HTTP.Errors.Error ) => {\n\t\t\tthis.sending = false;\n\t\t\tthis.setErrorMessage( error );\n\t\t\tthis.shakeForm();\n\t\t} );\n\t}\n\n\tgetDays( firstDate:Date, lastDate:Date ):number {\n\t\t// Discard the time and time-zone information\n\t\tlet utc1:number = Date.UTC( firstDate.getFullYear(), firstDate.getMonth(), firstDate.getDate() );\n\t\tlet utc2:number = Date.UTC( lastDate.getFullYear(), lastDate.getMonth(), lastDate.getDate() );\n\t\tlet msPerDay:number = 1000 * 60 * 60 * 24;\n\t\treturn Math.floor( (utc2 - utc1) / msPerDay );\n\t}\n\n\tsetErrorMessage( error:HTTP.Errors.Error ):void {\n\t\tswitch( true ) {\n\t\t\tcase error instanceof HTTP.Errors.ForbiddenError:\n\t\t\t\tthis.errorMessage = \"Denied Access.\";\n\t\t\t\tbreak;\n\t\t\tcase error instanceof HTTP.Errors.UnauthorizedError:\n\t\t\t\tthis.errorMessage = \"Wrong credentials.\";\n\t\t\t\tbreak;\n\t\t\tcase error instanceof HTTP.Errors.BadGatewayError:\n\t\t\t\tthis.errorMessage = \"An error occurred while trying to login. Please try again later. Error: \" + error.response.status;\n\t\t\t\tbreak;\n\t\t\tcase error instanceof HTTP.Errors.GatewayTimeoutError:\n\t\t\t\tthis.errorMessage = \"An error occurred while trying to login. Please try again later. Error: \" + error.response.status;\n\t\t\t\tbreak;\n\t\t\tcase error instanceof HTTP.Errors.InternalServerErrorError:\n\t\t\t\tthis.errorMessage = \"An error occurred while trying to login. Please try again later. Error: \" + error.response.status;\n\t\t\t\tbreak;\n\t\t\tcase error instanceof HTTP.Errors.UnknownError:\n\t\t\t\tthis.errorMessage = \"An error occurred while trying to login. Please try again later. Error: \" + error.response.status;\n\t\t\t\tbreak;\n\t\t\tcase error instanceof HTTP.Errors.ServiceUnavailableError:\n\t\t\t\tthis.errorMessage = \"Service currently unavailable.\";\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tthis.errorMessage = \"There was a problem processing the request. Error: \" + error.response.status;\n\t\t\t\tbreak;\n\t\t}\n\t}\n\n\tshakeForm():void {\n\t\tlet target:JQuery = this.container ? $( this.container ) : this.$element;\n\t\tif( ! target ) return;\n\n\t\ttarget.transition( {\n\t\t\tanimation: \"shake\",\n\t\t} );\n\t}\n}\n\nexport default LoginComponent;\n"]}