{"version":3,"sources":["login.component.ts"],"names":[],"mappings":"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","file":"login.component.js","sourcesContent":["import { Component, ElementRef, Input, Output, Inject, EventEmitter } from \"@angular/core\";\n\nimport { AuthService } from \"angular2-carbonldp/services\";\n\nimport Credentials from \"carbonldp/Auth/Credentials\";\nimport * as HTTP from \"carbonldp/HTTP\";\n\nimport $ from \"jquery\";\nimport \"semantic-ui/semantic\";\n\nimport template from \"./login.component.html!\";\n\n@Component( {\n\tselector: \"cp-login\",\n\ttemplate: template,\n\tstyles: [ \":host { display:block; } \" ],\n} )\nexport class LoginComponent {\n\t@Input( \"container\" ) container:string|JQuery;\n\t@Output( \"onLogin\" ) onLogin:EventEmitter<Credentials> = new EventEmitter<Credentials>();\n\n\telement:ElementRef;\n\n\t$element:JQuery;\n\t$loginForm:JQuery;\n\n\tsending:boolean = false;\n\terrorMessage:string = \"\";\n\n\t// loginForm:ControlGroup;\n\n\tlogin:{email:string,password:string, rememberMe:boolean} =\n\t{\n\t\temail: \"\",\n\t\tpassword: \"\",\n\t\trememberMe: false\n\t};\n\n\tprivate authService:AuthService.Class;\n\n\tconstructor( element:ElementRef, @Inject( AuthService.Token ) authService:AuthService.Class ) {\n\t\tthis.element = element;\n\t\t// this.formBuilder = formBuilder;\n\t\tthis.authService = authService;\n\t}\n\n\tngOnInit():void {\n\t\tthis.$element = $( this.element.nativeElement );\n\t\tthis.$loginForm = this.$element.find( \"form.loginForm\" );\n\t\tthis.$loginForm.find( \".ui.checkbox\" ).checkbox();\n\t}\n\n\tonSubmit( data:{ email:string, password:string, rememberMe:boolean }, $event:any ):void {\n\t\t$event.preventDefault();\n\t\tthis.sending = true;\n\t\tthis.errorMessage = \"\";\n\n\t\tlet username:string = data.email;\n\t\tlet password:string = data.password;\n\t\tlet rememberMe:boolean = ! ! data.rememberMe;\n\n\t\tthis.authService.login( username, password, rememberMe ).then( ( credentials:Credentials ) => {\n\t\t\tthis.sending = false;\n\t\t\tthis.onLogin.emit( credentials );\n\t\t} ).catch( ( error:HTTP.Errors.Error ) => {\n\t\t\tthis.sending = false;\n\t\t\tthis.setErrorMessage( error );\n\t\t} );\n\t}\n\n\tgetDays( firstDate:Date, lastDate:Date ):number {\n\t\t// Discard the time and time-zone information\n\t\tlet utc1:number = Date.UTC( firstDate.getFullYear(), firstDate.getMonth(), firstDate.getDate() );\n\t\tlet utc2:number = Date.UTC( lastDate.getFullYear(), lastDate.getMonth(), lastDate.getDate() );\n\t\tlet msPerDay:number = 1000 * 60 * 60 * 24;\n\t\treturn Math.floor( (utc2 - utc1) / msPerDay );\n\t}\n\n\tsetErrorMessage( error:HTTP.Errors.Error ):void {\n\t\tswitch( true ) {\n\t\t\tcase error instanceof HTTP.Errors.ForbiddenError:\n\t\t\t\tthis.errorMessage = \"Denied Access.\";\n\t\t\t\tbreak;\n\t\t\tcase error instanceof HTTP.Errors.UnauthorizedError:\n\t\t\t\tthis.errorMessage = \"Wrong credentials.\";\n\t\t\t\tbreak;\n\t\t\tcase error instanceof HTTP.Errors.BadGatewayError:\n\t\t\t\tthis.errorMessage = \"An error occurred while trying to login. Please try again later. Error: \" + error.response.status;\n\t\t\t\tbreak;\n\t\t\tcase error instanceof HTTP.Errors.GatewayTimeoutError:\n\t\t\t\tthis.errorMessage = \"An error occurred while trying to login. Please try again later. Error: \" + error.response.status;\n\t\t\t\tbreak;\n\t\t\tcase error instanceof HTTP.Errors.InternalServerErrorError:\n\t\t\t\tthis.errorMessage = \"An error occurred while trying to login. Please try again later. Error: \" + error.response.status;\n\t\t\t\tbreak;\n\t\t\tcase error instanceof HTTP.Errors.UnknownError:\n\t\t\t\tthis.errorMessage = \"An error occurred while trying to login. Please try again later. Error: \" + error.response.status;\n\t\t\t\tbreak;\n\t\t\tcase error instanceof HTTP.Errors.ServiceUnavailableError:\n\t\t\t\tthis.errorMessage = \"Service currently unavailable.\";\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tthis.errorMessage = \"There was a problem processing the request. Error: \" + error.response.status;\n\t\t\t\tbreak;\n\t\t}\n\t}\n\n\tshakeForm():void {\n\t\tlet target:JQuery = this.container ? $( this.container ) : this.$element;\n\t\tif( ! target ) return;\n\n\t\ttarget.transition( {\n\t\t\tanimation: \"shake\",\n\t\t} );\n\t}\n}\n\nexport default LoginComponent;\n"]}