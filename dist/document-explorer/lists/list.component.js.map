{"version":3,"sources":["document-explorer/lists/list.component.ts"],"names":[],"mappings":"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","file":"list.component.js","sourcesContent":["import { ElementRef, Component, Input, Output, EventEmitter } from \"@angular/core\";\n\nimport \"semantic-ui/semantic\";\n\nimport * as SDKLiteral from \"carbonldp/RDF/Literal\";\nimport * as RDFNode from \"carbonldp/RDF/Node\";\nimport * as Utils from \"carbonldp/Utils\";\n\nimport { Literal, LiteralRow } from \"./../literals/literal.component\";\nimport { Pointer, PointerRow } from \"./../pointers/pointer.component\";\n\nimport template from \"./list.component.html!\";\nimport style from \"./list.component.css!text\";\n\n@Component( {\n\tselector: \"cp-list\",\n\ttemplate: template,\n\tstyles: [ style ],\n\thost: { \"[class.modified]\": \"list.modified\", \"[class.deleted]\": \"list.deleted\", \"[class.added]\": \"list.added\" },\n} )\n\nexport class ListComponent {\n\n\telement:ElementRef;\n\t$element:JQuery;\n\n\tcopyOrAddedOrModified:string;\n\ttempList:any[] = [];\n\torderHasChanged:boolean = false;\n\n\n\tprivate _list:ListRow;\n\tget list() { return this._list; }\n\n\t@Input() set list( list:ListRow ) {\n\t\tthis.copyOrAddedOrModified = ! ! list.copy ? (! ! list.modified ? \"modified\" : \"copy\") : \"added\";\n\t\tthis._list = list;\n\t\tlist[ this.copyOrAddedOrModified ].forEach( ( literalOrPointer ) => {\n\t\t\t( <Array<any>>this.tempList ).push( Object.assign( {}, literalOrPointer ) );\n\t\t} );\n\t}\n\n\t@Input() documentURI:string = \"\";\n\t@Input() pointers:PointerRow[] = [];\n\t@Input() blankNodes:RDFNode.Class[] = [];\n\t@Input() namedFragments:RDFNode.Class[] = [];\n\n\t@Output() onSave:EventEmitter<ListRow> = new EventEmitter<ListRow>();\n\t@Output() onDeleteList:EventEmitter<ListRow> = new EventEmitter<ListRow>();\n\t@Output() onGoToBlankNode:EventEmitter<string> = new EventEmitter<string>();\n\t@Output() onGoToNamedFragment:EventEmitter<string> = new EventEmitter<string>();\n\n\theaders:string[] = [];\n\n\tconstructor( element:ElementRef ) {\n\t\tthis.element = element;\n\t}\n\n\tngAfterViewInit():void {\n\t\tthis.$element = $( this.element.nativeElement );\n\t\tthis.initializeDeletionDimmer();\n\t}\n\n\tisLiteral( item:any ):boolean {\n\t\treturn SDKLiteral.Factory.is( item[ ! ! item.copy ? (! ! item.modified ? \"modified\" : \"copy\") : \"added\" ] );\n\t}\n\n\tisPointer( item:any ):boolean {\n\t\treturn RDFNode.Factory.is( item[ ! ! item.copy ? (! ! item.modified ? \"modified\" : \"copy\") : \"added\" ] );\n\t}\n\n\tmoveUp( pointerOrLiteral:PointerRow | LiteralRow, index:number ):void {\n\t\tthis.tempList.splice( index, 1 );\n\t\tthis.tempList.splice( index - 1, 0, pointerOrLiteral );\n\t\tif( typeof this.list.copy === \"undefined\" ) return;\n\t\tthis.orderHasChanged = ! this.areEquals( this.list.copy, this.tempList );\n\t\tthis.updateTempList();\n\t}\n\n\tmoveDown( pointerOrLiteral:PointerRow | LiteralRow, index:number ):void {\n\t\tthis.tempList.splice( index, 1 );\n\t\tthis.tempList.splice( index + 1, 0, pointerOrLiteral );\n\t\tif( typeof this.list.copy === \"undefined\" ) return;\n\t\tthis.orderHasChanged = ! this.areEquals( this.list.copy, this.tempList );\n\t\tthis.updateTempList();\n\t}\n\n\taddPointer():void {\n\t\tlet newPointerRow:PointerRow = <PointerRow>{};\n\t\tnewPointerRow.added = <Pointer>{ \"@id\": \"\" };\n\t\tnewPointerRow.isBeingCreated = true;\n\t\tthis.tempList.splice( this.tempList.length, 0, newPointerRow );\n\t\tthis.updateTempList();\n\t}\n\n\taddLiteral():void {\n\t\tlet newLiteralRow:LiteralRow = <LiteralRow>{};\n\t\tnewLiteralRow.added = <Literal>{ \"@value\": \"\" };\n\t\tnewLiteralRow.isBeingCreated = true;\n\t\tthis.tempList.splice( this.tempList.length, 0, newLiteralRow );\n\t\tthis.updateTempList();\n\t}\n\n\tsaveItem( modifiedPointer:PointerRow, originalPointer:PointerRow, index:number ) {\n\t\tif( typeof originalPointer.added !== \"undefined\" ) delete originalPointer.isBeingCreated;\n\t\tthis.updateTempList();\n\t}\n\n\tdeleteItem( deletingItem:PointerRow|LiteralRow, index:number ):void {\n\t\tif( typeof deletingItem.added !== \"undefined\" ) this.tempList.splice( index, 1 );\n\t\tthis.updateTempList();\n\t}\n\n\tgetAddedItems():PointerRow[]|LiteralRow[] {\n\t\treturn this.tempList.filter( ( item:PointerRow|LiteralRow ) => typeof item.added !== \"undefined\" );\n\t}\n\n\tgetDeletedItems():PointerRow[]|LiteralRow[] {\n\t\treturn this.tempList.filter( ( item:PointerRow|LiteralRow ) => typeof item.deleted !== \"undefined\" );\n\t}\n\n\tgetModifiedItems():PointerRow[]|LiteralRow[] {\n\t\treturn this.tempList.filter( ( item:PointerRow|LiteralRow ) => typeof item.modified !== \"undefined\" && typeof item.deleted === \"undefined\" );\n\t}\n\n\tgetUntouchedItems():Array<PointerRow|LiteralRow> {\n\t\treturn this.tempList.filter( ( item:PointerRow|LiteralRow ) => typeof item.modified === \"undefined\" && typeof item.deleted === \"undefined\" );\n\t}\n\n\tareEquals( original:Array<LiteralRow|PointerRow>, modified:Array<ListRow|PointerRow> ):boolean {\n\t\treturn Utils.O.areEqual( original, modified, { arrays: true, objects: true } );\n\t}\n\n\tupdateTempList():void {\n\t\tlet hasBeenModified:boolean = this.hasBeenModified();\n\t\tif( typeof this.list.copy !== \"undefined\" && hasBeenModified ) {\n\t\t\tthis.list.modified = this.tempList;\n\t\t} else if( typeof this.list.copy !== \"undefined\" && ! hasBeenModified ) {\n\t\t\tdelete this.list.modified;\n\t\t} else {\n\t\t\tthis.list.added = this.tempList;\n\t\t}\n\t\tthis.onSave.emit( this.list );\n\t}\n\n\thasBeenModified():boolean {\n\t\treturn this.orderHasChanged || (this.tempList.findIndex( ( item:PointerRow|LiteralRow ) => { return typeof item.modified !== \"undefined\" || typeof item.added !== \"undefined\" || typeof item.deleted !== \"undefined\"} ) !== - 1);\n\t}\n\n\tgoToBlankNode( id:string ):void {\n\t\tthis.onGoToBlankNode.emit( id );\n\t}\n\n\tgoToNamedFragment( id:string ):void {\n\t\tthis.onGoToNamedFragment.emit( id );\n\t}\n\n\tinitializeDeletionDimmer():void {\n\t\tthis.$element.find( \".list.confirm-deletion.dimmer\" ).dimmer( { closable: false } );\n\t}\n\n\taskToConfirmDeletion():void {\n\t\tthis.$element.find( \".list.confirm-deletion.dimmer\" ).dimmer( \"show\" );\n\t}\n\n\tcancelDeletion():void {\n\t\tthis.$element.find( \".list.confirm-deletion.dimmer\" ).dimmer( \"hide\" );\n\t}\n\n\tdeleteList():void {\n\t\tif( this.list.added ) this.onDeleteList.emit( this.list );\n\t\tif( this.list.copy ) {\n\t\t\tthis.list.deleted = this.list.copy;\n\t\t\tthis.updateTempList();\n\t\t}\n\t}\n\n}\n\nexport interface ListRow {\n\tcopy?:any;\n\tadded?:any;\n\tmodified?:any;\n\tdeleted?:any;\n\n\tisBeingCreated?:boolean\n}\n\nexport interface List {\n\t\"@list\":any[];\n}\n\nexport default ListComponent;"]}