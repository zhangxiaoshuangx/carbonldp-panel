{"version":3,"sources":["document-explorer/document-viewer/document-viewer.component.ts"],"names":[],"mappings":"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","file":"document-explorer/document-viewer/document-viewer.component.js","sourcesContent":["import { Component, ElementRef, Input, Output, EventEmitter, SimpleChange, ViewChild, AfterViewInit, OnChanges } from \"@angular/core\";\n\nimport { Message } from \"carbonldp-panel/errors-area/error-message.component\";\nimport * as RDFNode from \"carbonldp/RDF/RDFNode\";\nimport * as SDKContext from \"carbonldp/SDKContext\";\nimport * as RDFDocument from \"carbonldp/RDF/Document\";\nimport * as JSONLDParser from \"carbonldp/JSONLD/Parser\";\nimport * as PersistedDocument from \"carbonldp/PersistedDocument\";\nimport * as URI from \"carbonldp/RDF/URI\";\nimport { Error as HTTPError } from \"carbonldp/HTTP/Errors\";\n\nimport { DocumentsResolverService } from \"./../documents-resolver.service\";\nimport { RootRecords } from \"./../document-resource/document-resource.component\";\nimport { BlankNodesComponent, BlankNodesRecords } from \"./../blank-nodes/blank-nodes.component\";\nimport { NamedFragmentsComponent, NamedFragmentsRecords }from \"./../named-fragments/named-fragments.component\";\nimport { BlankNodeRow } from \"./../blank-nodes/blank-node.component\";\nimport { NamedFragmentRow } from \"./../named-fragments/named-fragment.component\";\n\nimport $ from \"jquery\";\nimport \"semantic-ui/semantic\";\n\nimport template from \"./document-viewer.component.html!\";\nimport style from \"./document-viewer.component.css!text\";\n\n@Component( {\n\tselector: \"cp-document-viewer\",\n\thost: { \"[class.ui]\": \"true\", \"[class.basic]\": \"true\", \"[class.segment]\": \"true\", },\n\ttemplate: template,\n\tstyles: [ style ],\n} )\n\nexport class DocumentViewerComponent implements AfterViewInit, OnChanges {\n\telement:ElementRef;\n\t$element:JQuery;\n\t$saveSuccessMessage:JQuery;\n\t$createChildSuccessMessage:JQuery;\n\t$confirmDeletionDimmer:JQuery;\n\n\tsections:string[] = [ \"bNodes\", \"namedFragments\", \"documentResource\" ];\n\trootNode:RDFNode.Class;\n\tbNodes:BlankNodeRow[] = [];\n\tnamedFragments:NamedFragmentRow[] = [];\n\tsavingErrorMessage:Message;\n\tdocumentURI:string = \"\";\n\n\trootNodeHasChanged:boolean = false;\n\trootNodeRecords:RootRecords;\n\tbNodesHaveChanged:boolean = false;\n\tbNodesChanges:BlankNodesRecords;\n\tnamedFragmentsHaveChanged:boolean = false;\n\tnamedFragmentsChanges:NamedFragmentsRecords;\n\n\tcreateChildFormModel:{ slug:string } = {\n\t\tslug: \"\"\n\t};\n\tcanDisplayCreateChildForm:boolean = false;\n\n\tget documentContentHasChanged() {\n\t\treturn this.rootNodeHasChanged || this.bNodesHaveChanged || this.namedFragmentsHaveChanged;\n\t}\n\n\n\tdocumentsResolverService:DocumentsResolverService;\n\t@Input() uri:string;\n\t@Input() documentContext:SDKContext.Class;\n\tprivate _document:RDFDocument.Class;\n\t@Input() set document( value:RDFDocument.Class ) {\n\t\tthis._document = value;\n\t\tthis.receiveDocument( value );\n\t}\n\n\tget document():RDFDocument.Class {return this._document;}\n\n\t@Output() onOpenNode:EventEmitter<string> = new EventEmitter<string>();\n\t@Output() onRefreshNode:EventEmitter<string> = new EventEmitter<string>();\n\t@Output() onLoadingDocument:EventEmitter<boolean> = new EventEmitter<boolean>();\n\t@Output() onSavingDocument:EventEmitter<boolean> = new EventEmitter<boolean>();\n\t@Output() onRefreshDocument:EventEmitter<string> = new EventEmitter<string>();\n\n\t@ViewChild( BlankNodesComponent ) documentBNodes:BlankNodesComponent;\n\t@ViewChild( NamedFragmentsComponent ) documentNamedFragments:NamedFragmentsComponent;\n\n\tprivate _savingDocument:boolean = false;\n\tset savingDocument( value:boolean ) {\n\t\tthis._savingDocument = value;\n\t\tthis.onSavingDocument.emit( value );\n\t}\n\n\tget savingDocument():boolean { return this._savingDocument; }\n\n\tprivate _loadingDocument:boolean = false;\n\tset loadingDocument( value:boolean ) {\n\t\tthis._loadingDocument = value;\n\t\tthis.onLoadingDocument.emit( value );\n\t}\n\n\tget loadingDocument():boolean { return this._loadingDocument; }\n\n\n\tconstructor( element:ElementRef, documentsResolverService:DocumentsResolverService ) {\n\t\tthis.element = element;\n\t\tthis.documentsResolverService = documentsResolverService;\n\t}\n\n\n\tngAfterViewInit():void {\n\t\tthis.$element = $( this.element.nativeElement );\n\t\tthis.$saveSuccessMessage = this.$element.find( \".success.save.message\" );\n\t\tthis.$createChildSuccessMessage = this.$element.find( \".success.createchild.message\" );\n\t\tthis.$confirmDeletionDimmer = this.$element.find( \".document.confirm-deletion.dimmer\" ).dimmer( { closable: false } );\n\t}\n\n\tngOnChanges( changes:{[propName:string]:SimpleChange} ):void {\n\t\tif( changes[ \"uri\" ] && ! ! changes[ \"uri\" ].currentValue && changes[ \"uri\" ].currentValue !== changes[ \"uri\" ].previousValue ) {\n\t\t\tthis.loadingDocument = true;\n\t\t\tthis.getDocument( this.uri, this.documentContext ).then( ( document:RDFDocument.Class ) => {\n\t\t\t\tthis.document = document[ 0 ];\n\t\t\t} );\n\t\t}\n\t}\n\n\treceiveDocument( document:RDFDocument.Class ):void {\n\t\tif( ! ! document ) {\n\t\t\tthis.loadingDocument = true;\n\t\t\tthis.setRoot();\n\t\t\tthis.generateFragments();\n\t\t\tthis.clearDocumentChanges();\n\t\t\tthis.loadingDocument = false;\n\t\t\tthis.savingErrorMessage = null;\n\t\t\tthis.documentURI = this.document[ \"@id\" ];\n\n\t\t\tthis.cancelDeletion();\n\t\t\tthis.hideCreateChildForm();\n\t\t\tthis.createChildFormModel = { slug: \"\" };\n\n\t\t\tsetTimeout(\n\t\t\t\t()=> {\n\t\t\t\t\tthis.goToSection( \"documentResource\" );\n\t\t\t\t\tthis.initializeTabs();\n\t\t\t\t}, 250\n\t\t\t);\n\t\t}\n\t}\n\n\tsetRoot():void {\n\t\tthis.rootNode = RDFDocument.Util.getDocumentResources( this.document )[ 0 ];\n\t}\n\n\tgetDocument( uri:string, documentContext:SDKContext.Class ):Promise<RDFDocument.Class> {\n\t\treturn this.documentsResolverService.get( uri, documentContext );\n\t}\n\n\tgenerateFragments():void {\n\t\tthis.bNodes = RDFDocument.Util.getBNodeResources( this.document ).map(\n\t\t\t( bNode:RDFNode.Class )=> {\n\t\t\t\treturn {\n\t\t\t\t\tid: bNode[ \"@id\" ],\n\t\t\t\t\tbNodeIdentifier: bNode[ \"https://carbonldp.com/ns/v1/platform#bNodeIdentifier\" ][ 0 ][ \"@value\" ],\n\t\t\t\t\tcopy: bNode\n\t\t\t\t}\n\t\t\t} );\n\t\tthis.namedFragments = RDFDocument.Util.getFragmentResources( this.document ).map(\n\t\t\t( namedFragment:RDFNode.Class )=> {\n\t\t\t\treturn {\n\t\t\t\t\tid: namedFragment[ \"@id\" ],\n\t\t\t\t\tname: namedFragment[ \"@id\" ],\n\t\t\t\t\tcopy: namedFragment\n\t\t\t\t}\n\t\t\t} );\n\t}\n\n\topenBlankNode( id:string ):void {\n\t\tthis.documentBNodes.openBlankNode( id );\n\t\tthis.goToSection( \"bNodes\" );\n\t}\n\n\topenNamedFragment( id:string ):void {\n\t\tthis.documentNamedFragments.openNamedFragment( id );\n\t\tthis.goToSection( \"namedFragments\" );\n\t}\n\n\tinitializeTabs() {\n\t\tthis.$element.find( \".secondary.menu.document.tabs .item\" ).tab();\n\t}\n\n\tgoToSection( section:string ):void {\n\t\tif( this.sections.indexOf( section ) === - 1 ) return;\n\t\tthis.scrollTo( \">div:first-child\" );\n\t\tthis.$element.find( \".secondary.menu.document.tabs .item\" ).tab( \"changeTab\", section );\n\t}\n\n\tregisterRootNodeChanges( records:RootRecords ):void {\n\t\tthis.rootNodeRecords = records;\n\t\tthis.rootNodeHasChanged = records.changes.size > 0 || records.additions.size > 0 || records.deletions.size > 0;\n\t}\n\n\tregisterBlankNodesChanges( bNodeChanges:BlankNodesRecords ):void {\n\t\tthis.bNodesChanges = bNodeChanges;\n\t\tthis.bNodesHaveChanged = bNodeChanges.changes.size > 0 || bNodeChanges.additions.size > 0 || bNodeChanges.deletions.size > 0;\n\t}\n\n\tregisterNamedFragmentsChanges( namedFragmentsChanges:NamedFragmentsRecords ):void {\n\t\tthis.namedFragmentsChanges = namedFragmentsChanges;\n\t\tthis.namedFragmentsHaveChanged = namedFragmentsChanges.changes.size > 0 || namedFragmentsChanges.additions.size > 0 || namedFragmentsChanges.deletions.size > 0;\n\t}\n\n\tmodifyRootNodeWithChanges( rootNode:RDFNode.Class ):void {\n\t\tif( ! ! this.rootNodeRecords ) {\n\t\t\tthis.rootNodeRecords.deletions.forEach( ( property, key )=> {\n\t\t\t\tdelete rootNode[ key ];\n\t\t\t} );\n\t\t\tthis.rootNodeRecords.changes.forEach( ( property, key )=> {\n\t\t\t\tif( property.modified.id !== property.modified.name ) {\n\t\t\t\t\tdelete rootNode[ key ];\n\t\t\t\t\trootNode[ property.modified.name ] = property.modified.value;\n\t\t\t\t} else {\n\t\t\t\t\trootNode[ key ] = property.modified.value;\n\t\t\t\t}\n\t\t\t} );\n\t\t\tthis.rootNodeRecords.additions.forEach( ( property, key )=> {\n\t\t\t\trootNode[ key ] = property.added.value;\n\t\t\t} );\n\n\t\t}\n\t}\n\n\tmodifyBNodesWithChanges( document:RDFDocument.Class ):void {\n\t\tlet tempIdx:number;\n\t\tif( ! this.bNodesChanges ) return;\n\t\tthis.bNodesChanges.deletions.forEach( ( blankNodeRow:BlankNodeRow, bNodeId )=> {\n\t\t\ttempIdx = document[ \"@graph\" ].findIndex( (bNode => { return bNode[ \"@id\" ] === bNodeId }) );\n\t\t\tdocument[ \"@graph\" ].splice( tempIdx, 1 );\n\t\t} );\n\t\ttempIdx = - 1;\n\t\tthis.bNodesChanges.changes.forEach( ( blankNodeRow:BlankNodeRow, bNodeId )=> {\n\t\t\ttempIdx = document[ \"@graph\" ].findIndex( (bNode => { return bNode[ \"@id\" ] === bNodeId }) );\n\t\t\tdocument[ \"@graph\" ][ tempIdx ] = blankNodeRow.modified;\n\t\t} );\n\t\tthis.bNodesChanges.additions.forEach( ( blankNodeRow:BlankNodeRow, bNodeId )=> {\n\t\t\tdocument[ \"@graph\" ].push( blankNodeRow.added );\n\t\t} );\n\t}\n\n\tmodifyNamedFragmentsWithChanges( document:RDFDocument.Class ):void {\n\t\tlet tempIdx:number;\n\t\tif( ! this.namedFragmentsChanges ) return;\n\t\tthis.namedFragmentsChanges.deletions.forEach( ( namedFragmentRow:NamedFragmentRow, namedFragmentId )=> {\n\t\t\ttempIdx = document[ \"@graph\" ].findIndex( (namedFragment => { return namedFragment[ \"@id\" ] === namedFragmentId }) );\n\t\t\tdocument[ \"@graph\" ].splice( tempIdx, 1 );\n\t\t} );\n\t\ttempIdx = - 1;\n\t\tthis.namedFragmentsChanges.changes.forEach( ( namedFragmentRow:NamedFragmentRow, namedFragmentId )=> {\n\t\t\ttempIdx = document[ \"@graph\" ].findIndex( (namedFragment => { return namedFragment[ \"@id\" ] === namedFragmentId }) );\n\t\t\tdocument[ \"@graph\" ][ tempIdx ] = namedFragmentRow.modified;\n\t\t} );\n\t\tthis.namedFragmentsChanges.additions.forEach( ( namedFragmentRow:NamedFragmentRow, namedFragmentId )=> {\n\t\t\tdocument[ \"@graph\" ].push( namedFragmentRow.added );\n\t\t} );\n\t}\n\n\tclearDocumentChanges():void {\n\t\tthis.rootNodeRecords = new RootRecords();\n\t\tthis.bNodesChanges = new BlankNodesRecords();\n\t\tthis.namedFragmentsChanges = new BlankNodesRecords();\n\t\tthis.rootNodeHasChanged = false;\n\t\tthis.bNodesHaveChanged = false;\n\t\tthis.namedFragmentsHaveChanged = false;\n\t}\n\n\tsaveDocument():void {\n\t\tthis.savingDocument = true;\n\t\tlet backupDocument:RDFDocument.Class = JSON.parse( JSON.stringify( this.document ) );\n\t\tlet backupRootNode:RDFNode.Class = RDFDocument.Util.getDocumentResources( backupDocument )[ 0 ];\n\t\tthis.modifyRootNodeWithChanges( backupRootNode );\n\t\tthis.modifyBNodesWithChanges( backupDocument );\n\t\tthis.modifyNamedFragmentsWithChanges( backupDocument );\n\t\tlet body:string = JSON.stringify( backupDocument, null, \"\\t\" );\n\t\tthis.documentsResolverService.update( backupDocument[ \"@id\" ], body, this.documentContext ).then(\n\t\t\t( updatedDocument:RDFDocument.Class )=> {\n\t\t\t\tthis.document = updatedDocument[ 0 ];\n\t\t\t\tsetTimeout( ()=> {\n\t\t\t\t\tthis.$saveSuccessMessage.transition( {\n\t\t\t\t\t\tonComplete: ()=> {\n\t\t\t\t\t\t\tsetTimeout( ()=> {\n\t\t\t\t\t\t\t\tif( ! this.$saveSuccessMessage.hasClass( \"hidden\" ) ) this.$saveSuccessMessage.transition( \"fade\" );\n\t\t\t\t\t\t\t}, 4000 );\n\t\t\t\t\t\t}\n\t\t\t\t\t} );\n\t\t\t\t}, 1500 );\n\t\t\t}\n\t\t).catch( ( error:HTTPError )=> {\n\t\t\tthis.savingErrorMessage = {\n\t\t\t\ttitle: error.name,\n\t\t\t\tcontent: (<XMLHttpRequest>error.response.request).statusText,\n\t\t\t\tstatusCode: \"\" + error.response.status,\n\t\t\t\tstatusMessage: (<XMLHttpRequest>error.response.request).statusText,\n\t\t\t\tendpoint: (<any>error.response.request).responseURL,\n\t\t\t};\n\t\t\tif( ! ! error.response.data ) {\n\t\t\t\t// TODO: Change this method to use the correct HTTPError when Javascript SDK implements it\n\t\t\t\tthis.getErrors( error ).then( ( errors )=> {\n\t\t\t\t\tthis.savingErrorMessage[ \"errors\" ] = errors;\n\t\t\t\t} );\n\t\t\t}\n\t\t} ).then( ()=> {\n\t\t\tthis.savingDocument = false;\n\t\t\tthis.rootNodeHasChanged = this.rootNodeRecords.changes.size > 0 || this.rootNodeRecords.additions.size > 0 || this.rootNodeRecords.deletions.size > 0;\n\t\t\tthis.bNodesHaveChanged = this.bNodesChanges.changes.size > 0 || this.bNodesChanges.additions.size > 0 || this.bNodesChanges.deletions.size > 0;\n\t\t\tthis.namedFragmentsHaveChanged = this.namedFragmentsChanges.changes.size > 0 || this.namedFragmentsChanges.additions.size > 0 || this.namedFragmentsChanges.deletions.size > 0;\n\t\t} );\n\t}\n\n\tgetErrors( error:HTTPError ):Promise<any[]> {\n\t\tlet parser:JSONLDParser.Class = new JSONLDParser.Class();\n\t\tlet mainError = {};\n\t\tlet errors:any[] = [];\n\t\treturn parser.parse( error.response.data ).then( ( mainErrors )=> {\n\t\t\tmainError = mainErrors.find( ( error )=> { return error[ \"@type\" ].indexOf( \"https://carbonldp.com/ns/v1/platform#ErrorResponse\" ) !== - 1} );\n\t\t\terrors = mainErrors.filter( ( error )=> { return error[ \"@type\" ].indexOf( \"https://carbonldp.com/ns/v1/platform#Error\" ) !== - 1} );\n\t\t\treturn errors;\n\t\t} );\n\t}\n\n\tclearSavingError():void {\n\t\tthis.savingErrorMessage = null;\n\t}\n\n\tcloseMessage( message:HTMLElement ):void {\n\t\t$( message ).transition( \"fade\" );\n\t}\n\n\tprivate deleteDocument():void {\n\t\tthis.documentsResolverService.delete( this.documentContext, this.documentURI ).then( ( result )=> {\n\n\t\t\tthis.onOpenNode.emit( this.getParentURI( this.documentURI ) );\n\t\t\tthis.cancelDeletion();\n\n\t\t} ).catch( ( error:HTTPError )=> {\n\t\t\tthis.savingErrorMessage = {\n\t\t\t\ttitle: error.name,\n\t\t\t\tcontent: error.message,\n\t\t\t\tstatusCode: \"\" + error.statusCode,\n\t\t\t\tstatusMessage: (<XMLHttpRequest>error.response.request).statusText,\n\t\t\t\tendpoint: (<any>error.response.request).responseURL,\n\t\t\t};\n\t\t\tif( ! ! error.response.data ) {\n\t\t\t\tthis.getErrors( error ).then( ( errors )=> {\n\t\t\t\t\tthis.savingErrorMessage[ \"errors\" ] = errors;\n\t\t\t\t} );\n\t\t\t}\n\t\t} );\n\t}\n\n\tprivate cancelDeletion():void {\n\t\tthis.$element.find( \".document.confirm-deletion.dimmer\" ).dimmer( \"hide\" );\n\t}\n\n\tprivate askToConfirmDeletion():void {\n\t\tthis.$element.find( \".document.confirm-deletion.dimmer\" ).dimmer( \"show\" );\n\t}\n\n\tprivate getParentURI( documentURI:string ):string {\n\t\tlet slug:string = URI.Util.getSlug( documentURI ),\n\t\t\tslugIdx:number = documentURI.indexOf( slug );\n\t\treturn documentURI.substr( 0, slugIdx );\n\t}\n\n\tprivate toggleCreateChildForm():void {\n\t\tthis.$element.find( \"form.createchild\" ).transition( {\n\t\t\ttransition: \"drop\",\n\t\t\tonComplete: ()=> { this.canDisplayCreateChildForm = ! this.canDisplayCreateChildForm; }\n\t\t} );\n\t}\n\n\tprivate hideCreateChildForm():void {\n\t\tthis.$element.find( \"form.createchild\" ).transition( {\n\t\t\ttransition: \"drop\",\n\t\t\tonComplete: ()=> { this.canDisplayCreateChildForm = false; }\n\t\t} );\n\t}\n\n\tprivate createChild():void {\n\t\tlet childSlug:string = ! ! this.createChildFormModel.slug ? this.createChildFormModel.slug : null;\n\t\tlet childContent:any = {};\n\t\tthis.loadingDocument = true;\n\t\tthis.documentsResolverService.createChild( this.documentContext, this.documentURI, childContent, childSlug ).then(\n\t\t\t( createdChild:PersistedDocument.Class ) => {\n\t\t\t\tthis.onRefreshNode.emit( this.documentURI );\n\t\t\t\tsetTimeout( ()=> {\n\t\t\t\t\tthis.$createChildSuccessMessage.transition( {\n\t\t\t\t\t\tonComplete: ()=> {\n\t\t\t\t\t\t\tsetTimeout( ()=> {\n\t\t\t\t\t\t\t\tif( ! this.$createChildSuccessMessage.hasClass( \"hidden\" ) ) this.$createChildSuccessMessage.transition( \"fade\" );\n\t\t\t\t\t\t\t}, 4000 );\n\t\t\t\t\t\t}\n\t\t\t\t\t} );\n\t\t\t\t}, 1500 );\n\t\t\t}\n\t\t).catch( ( error:HTTPError )=> {\n\t\t\tthis.savingErrorMessage = {\n\t\t\t\ttitle: error.name,\n\t\t\t\tcontent: error.message,\n\t\t\t\tstatusCode: \"\" + error.statusCode,\n\t\t\t\tstatusMessage: (<XMLHttpRequest>error.response.request).statusText,\n\t\t\t\tendpoint: (<any>error.response.request).responseURL,\n\t\t\t};\n\t\t\tif( ! ! error.response.data ) {\n\t\t\t\tthis.getErrors( error ).then( ( errors )=> {\n\t\t\t\t\tthis.savingErrorMessage[ \"errors\" ] = errors;\n\t\t\t\t} );\n\t\t\t}\n\t\t} ).then( ()=> {\n\t\t\tthis.loadingDocument = false;\n\t\t} );\n\t}\n\n\tprivate slugLostControl( evt:any ):void {\n\t\tif( typeof (evt.target) === \"undefined\" ) return;\n\t\tif( ! evt.target.value.endsWith( \"/\" ) && evt.target.value.trim() !== \"\" ) evt.target.value += \"/\";\n\t}\n\n\tprivate getSanitizedSlug( slug:string ):string {\n\t\tif( ! slug ) return slug;\n\t\tslug = slug.toLowerCase().replace( / - | -|- /g, \"-\" ).replace( /[^-\\w ]+/g, \"\" ).replace( / +/g, \"-\" );\n\t\treturn slug;\n\t}\n\n\tprivate beforeRefreshDocument( documentURI:string ):void {\n\t\tif( this.documentContentHasChanged ) this.toggleConfirmRefresh();\n\t\telse this.refreshDocument( documentURI );\n\t}\n\n\tprivate refreshDocument( documentURI:string ):void {\n\t\tthis.onRefreshDocument.emit( documentURI );\n\t\tthis.$element.find( \".unsaved.prompt.message\" ).transition( { animation: \"fade\" } ).transition( \"hide\" );\n\t}\n\n\tprivate toggleConfirmRefresh():void {\n\t\tthis.$element.find( \".unsaved.prompt.message\" ).transition( { animation: \"fade\" } );\n\t}\n\n\n\tprivate scrollTo( selector:string ):void {\n\t\tif( ! this.$element ) return;\n\t\tlet divPosition:JQueryCoordinates = this.$element.find( selector ).position();\n\t\tif( ! divPosition ) return;\n\t\tthis.$element.animate( { scrollTop: divPosition.top }, \"fast\" );\n\t}\n}\n\nexport default DocumentViewerComponent;"],"sourceRoot":"/source/"}