{"version":3,"sources":["document-explorer/document-explorer.component.ts"],"names":[],"mappings":"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","file":"document-explorer.component.js","sourcesContent":["import { Component, ElementRef, Input, Output, EventEmitter, NgZone, AfterViewInit } from \"@angular/core\";\n\nimport * as SDKContext from \"carbonldp/SDKContext\";\nimport * as RDFDocument from \"carbonldp/RDF/Document\";\nimport * as HTTP from \"carbonldp/HTTP\";\nimport * as JSONLDParser from \"carbonldp/JSONLD/Parser\";\nimport * as PersistedDocument from \"carbonldp/PersistedDocument\";\nimport * as URI from \"carbonldp/RDF/URI\";\nimport * as AccessPoint from \"carbonldp/AccessPoint\";\nimport { Error as HTTPError } from \"carbonldp/HTTP/Errors\";\n\nimport { DocumentsResolverService } from \"./documents-resolver.service\";\nimport { Message } from \"carbonldp-panel/errors-area/error-message.component\";\n\nimport \"semantic-ui/semantic\";\n\nimport template from \"./document-explorer.component.html!\";\nimport style from \"./document-explorer.component.css!text\";\n\n@Component( {\n\tselector: \"cp-document-explorer\",\n\ttemplate: template,\n\tstyles: [ style ],\n} )\n\nexport class DocumentExplorerComponent implements AfterViewInit {\n\n\telement:ElementRef;\n\t$element:JQuery;\n\n\t$deleteDocumentModal:JQuery;\n\n\tselectedDocumentURI:string = \"\";\n\tloadingDocument:boolean = false;\n\tsavingDocument:boolean = false;\n\tinspectingDocument:RDFDocument.Class;\n\tdocumentsResolverService:DocumentsResolverService;\n\tmessages:Message[] = [];\n\tsavingErrorMessage:Message;\n\n\n\t@Input() documentContext:SDKContext.Class;\n\t@Output() onRefreshNode:EventEmitter<string> = new EventEmitter<string>();\n\t@Output() onOpenNode:EventEmitter<string> = new EventEmitter<string>();\n\t@Output() onDisplaySuccessMessage:EventEmitter<string> = new EventEmitter<string>();\n\n\tprivate zone:NgZone;\n\n\tconstructor( element:ElementRef, documentsResolverService:DocumentsResolverService, zone:NgZone ) {\n\t\tthis.element = element;\n\t\tthis.documentsResolverService = documentsResolverService;\n\t\tthis.zone = zone;\n\t}\n\n\tngAfterViewInit():void {\n\t\tthis.$element = $( this.element.nativeElement );\n\t\tthis.$deleteDocumentModal = this.$element.find( \".delete.document.modal\" ).modal( { closable: false } );\n\t}\n\n\tonLoadingDocument( loadingDocument:boolean ):void {\n\t\tthis.loadingDocument = loadingDocument;\n\t}\n\n\tshowLoading( savingDocument:boolean ):void {\n\t\tthis.savingDocument = savingDocument;\n\t}\n\n\tresolveDocument( uri:string ):void {\n\t\tthis.loadingDocument = true;\n\t\tthis.documentsResolverService.get( uri, this.documentContext ).then( ( document:RDFDocument.Class )=> {\n\t\t\tthis.zone.run( () => {\n\t\t\t\tthis.inspectingDocument = document[ 0 ];\n\t\t\t\tthis.loadingDocument = false;\n\t\t\t} );\n\t\t} );\n\t}\n\n\trefreshDocument( documentURI:string ):void {\n\t\tthis.resolveDocument( documentURI );\n\t}\n\n\trefreshNode( nodeId:string ):void {\n\t\tthis.onRefreshNode.emit( nodeId );\n\t}\n\n\topenNode( nodeId:string ):void {\n\t\tthis.onOpenNode.emit( nodeId );\n\t}\n\n\tprivate changeSelection( documentURI:string ) {\n\t\tthis.selectedDocumentURI = documentURI;\n\t}\n\n\tprivate showModal( element:HTMLElement ):void {\n\t\t$( element ).modal( \"show\" );\n\t}\n\n\tprivate hideDeleteDocumentForm():void {\n\t\tthis.$deleteDocumentModal.modal( \"hide\" );\n\t}\n\n\tprivate onSuccessAccessPoint( $event:any ):void {\n\t\tthis.onRefreshNode.emit( this.selectedDocumentURI );\n\t\tthis.onDisplaySuccessMessage.emit( \"<p>The Access Point was created correctly</p>\" );\n\t}\n\n\tprivate onSuccessCreateDocument( $event:any ):void {\n\t\tthis.onRefreshNode.emit( this.selectedDocumentURI );\n\t\tthis.onDisplaySuccessMessage.emit( \"<p>The child document was created correctly</p>\" );\n\t}\n\n\tprivate deleteDocument():void {\n\t\tthis.documentsResolverService.delete( this.documentContext, this.selectedDocumentURI ).then( ( result )=> {\n\n\t\t\tthis.refreshNode( this.getParentURI( this.selectedDocumentURI ) );\n\t\t\tthis.hideDeleteDocumentForm();\n\n\t\t} ).catch( ( error:HTTPError )=> {\n\t\t\t// this.savingErrorMessage = this.getErrorMessage( error );\n\t\t} );\n\t}\n\n\tprivate getParentURI( documentURI:string ):string {\n\t\tlet slug:string = URI.Util.getSlug( documentURI ),\n\t\t\tslugIdx:number = documentURI.indexOf( slug );\n\t\treturn documentURI.substr( 0, slugIdx );\n\t}\n\n\tprivate clearSavingError():void {\n\t\tthis.savingErrorMessage = null;\n\t}\n\n\tprivate handleExternalError( error:HTTPError ):void {\n\t\t// this.messages.push( this.getErrorMessage( error ) );\n\t}\n\n}\n\nexport default DocumentExplorerComponent;"]}