{"version":3,"sources":["document-explorer/document-explorer.component.ts"],"names":[],"mappings":"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","file":"document-explorer.component.js","sourcesContent":["import { Component, ElementRef, Input, Output, EventEmitter, NgZone } from \"@angular/core\";\n\nimport * as SDKContext from \"carbonldp/SDKContext\";\nimport * as RDFDocument from \"carbonldp/RDF/Document\";\nimport * as HTTP from \"carbonldp/HTTP\";\nimport * as JSONLDParser from \"carbonldp/JSONLD/Parser\";\nimport * as PersistedDocument from \"carbonldp/PersistedDocument\";\nimport * as URI from \"carbonldp/RDF/URI\";\nimport * as AccessPoint from \"carbonldp/AccessPoint\";\nimport { Error as HTTPError } from \"carbonldp/HTTP/Errors\";\n\nimport { DocumentsResolverService } from \"./documents-resolver.service\"\nimport { Message } from \"carbonldp-panel/errors-area/error-message.component\";\n\nimport \"semantic-ui/semantic\";\n\nimport template from \"./document-explorer.component.html!\";\nimport style from \"./document-explorer.component.css!text\";\n\n@Component( {\n\tselector: \"cp-document-explorer\",\n\ttemplate: template,\n\tstyles: [ style ],\n} )\n\nexport class DocumentExplorerComponent {\n\n\telement:ElementRef;\n\t$element:JQuery;\n\n\t$createChildSuccessMessage:JQuery;\n\t$createDocumentModal:JQuery;\n\t$deleteDocumentModal:JQuery;\n\n\t$createAccessPointModal:JQuery;\n\n\tselectedDocumentURI:string = \"\";\n\tloadingDocument:boolean = false;\n\tsavingDocument:boolean = false;\n\tinspectingDocument:RDFDocument.Class;\n\tdocumentsResolverService:DocumentsResolverService;\n\tmessages:Message[] = [];\n\tsavingErrorMessage:Message;\n\n\tcreateChildFormModel:{ slug:string, advancedOptions:{hasMemberRelation:string, isMemberOfRelation:string }} = {\n\t\tslug: \"\",\n\t\tadvancedOptions: {\n\t\t\thasMemberRelation: \"http://www.w3.org/ns/ldp#member\",\n\t\t\tisMemberOfRelation: \"\"\n\t\t}\n\t};\n\tcreateAccessPointFormModel:{ slug:string, hasMemberRelation:string, isMemberOfRelation:string } = {\n\t\tslug: \"\",\n\t\thasMemberRelation: \"http://www.w3.org/ns/ldp#member\",\n\t\tisMemberOfRelation: \"\"\n\t};\n\n\t@Input() documentContext:SDKContext.Class;\n\t@Output() onRefreshNode:EventEmitter<string> = new EventEmitter<string>();\n\t@Output() onOpenNode:EventEmitter<string> = new EventEmitter<string>();\n\t@Output() onDisplaySuccessMessage:EventEmitter<string> = new EventEmitter<string>();\n\n\tprivate zone:NgZone;\n\n\tconstructor( element:ElementRef, documentsResolverService:DocumentsResolverService, zone:NgZone ) {\n\t\tthis.element = element;\n\t\tthis.documentsResolverService = documentsResolverService;\n\t\tthis.zone = zone;\n\t}\n\n\tngAfterViewInit():void {\n\t\tthis.$element = $( this.element.nativeElement );\n\t\tthis.$createChildSuccessMessage = this.$element.find( \".success.createchild.message\" );\n\t\tthis.$createAccessPointModal = this.$element.find( \".create.accesspoint.modal\" ).modal( { closable: false } );\n\t\tthis.$createDocumentModal = this.$element.find( \".create.document.modal\" ).modal( { closable: false } );\n\t\tthis.$deleteDocumentModal = this.$element.find( \".delete.document.modal\" ).modal( { closable: false } );\n\t\tthis.$createDocumentModal.find( \".advancedoptions.accordion\" ).accordion();\n\t}\n\n\tonLoadingDocument( loadingDocument:boolean ):void {\n\t\tthis.loadingDocument = loadingDocument;\n\t}\n\n\tshowLoading( savingDocument:boolean ):void {\n\t\tthis.savingDocument = savingDocument;\n\t}\n\n\tresolveDocument( uri:string ):void {\n\t\tthis.loadingDocument = true;\n\t\tthis.documentsResolverService.get( uri, this.documentContext ).then( ( document:RDFDocument.Class )=> {\n\t\t\tthis.zone.run( () => {\n\t\t\t\tthis.inspectingDocument = document[ 0 ];\n\t\t\t\tthis.loadingDocument = false;\n\t\t\t} );\n\t\t} );\n\t}\n\n\trefreshDocument( documentURI:string ):void {\n\t\tthis.resolveDocument( documentURI );\n\t}\n\n\trefreshNode( nodeId:string ):void {\n\t\tthis.onRefreshNode.emit( nodeId );\n\t}\n\n\topenNode( nodeId:string ):void {\n\t\tthis.onOpenNode.emit( nodeId );\n\t}\n\n\t//<editor-fold desc=\"#region Create child\">\n\tprivate changeSelection( documentURI:string ) {\n\t\tthis.selectedDocumentURI = documentURI;\n\t}\n\n\tprivate showCreateChildForm():void {\n\t\tthis.$createDocumentModal.modal( \"show\" );\n\t}\n\n\tprivate showCreateAccessPointForm():void {\n\t\tthis.$createAccessPointModal.modal( \"show\" );\n\t}\n\n\tprivate hideCreateChildForm():void {\n\t\tthis.$createDocumentModal.modal( \"hide\" );\n\t\tthis.clearSavingError();\n\t\tthis.createChildFormModel.slug = \"\";\n\t\tthis.createChildFormModel.advancedOptions.hasMemberRelation = \"http://www.w3.org/ns/ldp#member\";\n\t\tthis.createChildFormModel.advancedOptions.isMemberOfRelation = \"\";\n\t}\n\n\tprivate hideCreateAccessPointForm():void {\n\t\tthis.$createAccessPointModal.modal( \"hide\" );\n\t\tthis.clearSavingError();\n\t\tthis.createAccessPointFormModel.slug = \"\";\n\t\tthis.createAccessPointFormModel.hasMemberRelation = \"http://www.w3.org/ns/ldp#member\";\n\t\tthis.createAccessPointFormModel.isMemberOfRelation = \"\";\n\t}\n\n\tprivate slugLostControl( evt:any ):void {\n\t\tif( typeof (evt.target) === \"undefined\" ) return;\n\t\tif( ! evt.target.value.endsWith( \"/\" ) && evt.target.value.trim() !== \"\" ) evt.target.value += \"/\";\n\t}\n\n\tprivate getSanitizedSlug( slug:string ):string {\n\t\tif( ! slug ) return slug;\n\t\treturn slug.toLowerCase().replace( / - | -|- /g, \"-\" ).replace( /[^-\\w ]+/g, \"\" ).replace( / +/g, \"-\" );\n\t}\n\n\tprivate onSubmitCreateChild( data:{ slug:string, advancedOptions:{hasMemberRelation:string, isMemberOfRelation:string }}, $event:any ):void {\n\t\t$event.preventDefault();\n\t\tlet childSlug:string = null;\n\t\tif( ! ! data.slug )\n\t\t\tchildSlug = data.slug + ((data.slug.endsWith( \"/\" ) && data.slug.trim() !== \"\" ) ? \"/\" : \"\");\n\t\tlet childContent:any = {\n\t\t\thasMemberRelation: data.advancedOptions.hasMemberRelation\n\t\t};\n\t\tif( ! ! data.advancedOptions.isMemberOfRelation ) childContent[ \"isMemberOfRelation\" ] = data.advancedOptions.isMemberOfRelation;\n\t\tthis.loadingDocument = true;\n\t\tthis.documentsResolverService.createChild( this.documentContext, this.selectedDocumentURI, childContent, childSlug ).then(\n\t\t\t( createdChild:PersistedDocument.Class ) => {\n\t\t\t\tthis.onRefreshNode.emit( this.selectedDocumentURI );\n\t\t\t\tthis.hideCreateChildForm();\n\t\t\t\tthis.onDisplaySuccessMessage.emit( \"<p>The child document was created correctly</p>\" );\n\t\t\t}\n\t\t).catch( ( error:HTTPError )=> {\n\t\t\tthis.savingErrorMessage = this.getErrorMessage( error )\n\t\t} ).then( ()=> {\n\t\t\tthis.loadingDocument = false;\n\t\t} );\n\t}\n\n\tprivate onSubmitAccessPoint( data:{ slug:string, hasMemberRelation:string, isMemberOfRelation:string }, $event:any ):void {\n\t\t$event.preventDefault();\n\t\tlet slug:string = data.slug;\n\t\tlet accessPoint:AccessPoint.Class = {\n\t\t\thasMemberRelation: data.hasMemberRelation\n\t\t};\n\t\tif( ! ! data.isMemberOfRelation ) accessPoint.isMemberOfRelation = data.isMemberOfRelation;\n\n\t\tthis.documentContext.documents.get( this.selectedDocumentURI ).then( ( [document, response]:[PersistedDocument.Class, HTTP.Response.Class] )=> {\n\n\t\t\treturn this.documentsResolverService.createAccessPoint( document, accessPoint, slug );\n\n\t\t} ).then( ( document:PersistedDocument.Class )=> {\n\n\t\t\tthis.onRefreshNode.emit( this.selectedDocumentURI );\n\t\t\tthis.hideCreateAccessPointForm();\n\t\t\tthis.onDisplaySuccessMessage.emit( \"<p>The Access Point was created correctly</p>\" );\n\n\t\t} ).catch( ( error:HTTPError )=> {\n\t\t\tthis.savingErrorMessage = this.getErrorMessage( error )\n\t\t} );\n\t}\n\n\t//</editor-fold>\n\n\t//<editor-fold desc=\"#region Delete child\">\n\tprivate deleteDocument():void {\n\t\tthis.documentsResolverService.delete( this.documentContext, this.selectedDocumentURI ).then( ( result )=> {\n\n\t\t\tthis.refreshNode( this.getParentURI( this.selectedDocumentURI ) );\n\t\t\tthis.cancelDeletion();\n\n\t\t} ).catch( ( error:HTTPError )=> {\n\t\t\tthis.savingErrorMessage = this.getErrorMessage( error );\n\t\t} );\n\t}\n\n\tprivate cancelDeletion():void {\n\t\tthis.$deleteDocumentModal.modal( \"hide\" );\n\t}\n\n\tprivate showDeleteChildForm():void {\n\t\tthis.$deleteDocumentModal.modal( \"show\" );\n\t}\n\n\tprivate getParentURI( documentURI:string ):string {\n\t\tlet slug:string = URI.Util.getSlug( documentURI ),\n\t\t\tslugIdx:number = documentURI.indexOf( slug );\n\t\treturn documentURI.substr( 0, slugIdx );\n\t}\n\n\t//</editor-fold>\n\n\t// Start:Error Handling\n\tprivate clearSavingError():void {\n\t\tthis.savingErrorMessage = null;\n\t}\n\n\tprivate handleExternalError( error:HTTPError ):void {\n\t\tthis.messages.push( this.getErrorMessage( error ) );\n\t}\n\n\tprivate getErrorMessage( error:HTTPError ):Message {\n\t\tlet errorMessage:Message = {\n\t\t\ttitle: \"\",\n\t\t\tcontent: \"\",\n\t\t\tstatusCode: \"\",\n\t\t\tstatusMessage: \"\",\n\t\t\tendpoint: \"\"\n\t\t};\n\n\t\terrorMessage.title = error.hasOwnProperty( \"name\" ) ? error.name : \"\";\n\t\terrorMessage.content = error.hasOwnProperty( \"message\" ) ? error.message : \"\";\n\n\t\t// If it's a HTTP error\n\t\tif( error.hasOwnProperty( \"statusCode\" ) ) {\n\t\t\terrorMessage.content = errorMessage.content === \"\" ? this.getFriendlyHTTPMessage( error ) : errorMessage.content;\n\t\t\terrorMessage.statusCode = error.hasOwnProperty( \"message\" ) ? \"\" + error.statusCode : \"\";\n\t\t\terrorMessage.statusMessage = ( <XMLHttpRequest>error.response.request ).statusText;\n\t\t\terrorMessage.title = errorMessage.statusMessage;\n\t\t\terrorMessage.endpoint = ( <any>error.response.request ).responseURL;\n\t\t\tif( ! ! error.response.data )\n\t\t\t\tthis.getErrors( error ).then( ( errors )=> { errorMessage[ \"errors\" ] = errors; } );\n\t\t} else if( error.hasOwnProperty( \"stack\" ) ) {\n\t\t\t// If it's an uncaught exception\n\t\t\terrorMessage.title = error.message;\n\t\t\terrorMessage.stack = error.stack;\n\t\t}\n\t\treturn errorMessage;\n\t}\n\n\tprivate getErrors( error:HTTPError ):Promise<any[]> {\n\t\tlet parser:JSONLDParser.Class = new JSONLDParser.Class();\n\t\tlet mainError = {};\n\t\tlet errors:any[] = [];\n\t\treturn parser.parse( error.response.data ).then( ( mainErrors )=> {\n\t\t\tmainError = mainErrors.find( ( error )=> { return error[ \"@type\" ].indexOf( \"https://carbonldp.com/ns/v1/platform#ErrorResponse\" ) !== - 1} );\n\t\t\terrors = mainErrors.filter( ( error )=> { return error[ \"@type\" ].indexOf( \"https://carbonldp.com/ns/v1/platform#Error\" ) !== - 1} );\n\t\t\treturn errors;\n\t\t} );\n\t}\n\n\tprivate getFriendlyHTTPMessage( error:HTTP.Errors.Error ):string {\n\t\tlet tempMessage:string = \"\";\n\t\tswitch( true ) {\n\t\t\tcase error instanceof HTTP.Errors.ForbiddenError:\n\t\t\t\ttempMessage = \"Forbidden Action.\";\n\t\t\t\tbreak;\n\t\t\tcase error instanceof HTTP.Errors.NotFoundError:\n\t\t\t\ttempMessage = \"Couldn't found the requested resource.\";\n\t\t\t\tbreak;\n\t\t\tcase error instanceof HTTP.Errors.UnauthorizedError:\n\t\t\t\ttempMessage = \"Unauthorized operation.\";\n\t\t\t\tbreak;\n\t\t\tcase error instanceof HTTP.Errors.InternalServerErrorError:\n\t\t\t\ttempMessage = \"An internal error occurred while trying to fetch the resource. Please try again later. Error: \" + error.response.status;\n\t\t\t\tbreak;\n\t\t\tcase error instanceof HTTP.Errors.ServiceUnavailableError:\n\t\t\t\ttempMessage = \"Service currently unavailable.\";\n\t\t\t\tbreak;\n\t\t\tcase error instanceof HTTP.Errors.UnknownError:\n\t\t\t\t// TODO: Check if the UnknownError is due to a bad CORS configuration.\n\t\t\t\ttempMessage = \"An error occurred while trying to fetch the resource content. This could be caused by a missing allowed domain for your App. Please, make sure this is not the case and try again later.\";\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\ttempMessage = \"There was a problem processing the request. Error: \" + error.response.status;\n\t\t\t\tbreak;\n\t\t}\n\t\treturn tempMessage;\n\t}\n\n\t// End:Error Handling\n}\n\nexport default DocumentExplorerComponent;"]}