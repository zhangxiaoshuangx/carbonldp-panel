{"version":3,"sources":["directives/highlight.directive.ts"],"names":[],"mappings":"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","file":"directives/highlight.directive.js","sourcesContent":["import { Directive, ElementRef, AfterViewInit } from \"@angular/core\";\n\nimport Highlight from \"highlight.js\";\nimport \"highlight.js/styles/tomorrow-night.css!\";\n\n@Directive( {\n\tselector: \"[cpHighlight]\",\n} )\nexport class HighlightDirective implements AfterViewInit {\n\tconstructor( private element:ElementRef ) {}\n\n\tngAfterViewInit():void {\n\t\tlet html:string = this.element.nativeElement.innerHTML ? this.element.nativeElement.innerHTML : \"\";\n\t\tthis.element.nativeElement.innerHTML = this.normalizeTabs( html );\n\n\t\tHighlight.configure( {\n\t\t\ttabReplace: \"    \",\n\t\t} );\n\t\tHighlight.highlightBlock( this.element.nativeElement );\n\t}\n\n\tprivate normalizeTabs( value:string ):string {\n\t\tlet lines:string[] = value.split( /\\n/gm );\n\n\t\tif( ! lines[ 0 ].trim() ) lines.shift();\n\t\tif( lines.length > 0 && ! lines[ lines.length - 1 ].trim() ) lines.pop();\n\n\t\tlet containsSomething:boolean = lines.reduce( ( previous, line ) => previous || ! ! line.trim(), false );\n\t\tif( ! containsSomething ) return \"\";\n\n\t\tlet tabs:boolean = null;\n\t\tlet extraIndentation:number = null;\n\t\tfor( let line of lines ) {\n\t\t\tif( ! line.trim() ) continue;\n\t\t\tif( tabs === null ) tabs = line.startsWith( \"\\t\" );\n\t\t\tlet indentation:number = this.getIndentation( line, tabs );\n\t\t\tif( extraIndentation === null || extraIndentation > indentation ) extraIndentation = indentation;\n\t\t}\n\n\t\tthis.removeIndentation( lines, extraIndentation, tabs );\n\n\t\treturn lines.length ? lines.join( \"\\n\" ) : \"\";\n\t}\n\n\tprivate getIndentation( line:string, tabs:boolean = true ):number {\n\t\tlet indentationChar:string = tabs ? \"\\t\" : \" \";\n\t\tfor( var i:number = 0, length = line.length; i < length; i ++ ) {\n\t\t\tif( line.charAt( i ) !== indentationChar ) break;\n\t\t}\n\t\treturn i;\n\t}\n\n\tprivate removeIndentation( lines:string[], indentation:number, tabs:boolean = true ):string[] {\n\t\tfor( let i:number = 0, length = lines.length; i < length; i ++ ) {\n\t\t\tlet line:string = lines[ i ];\n\t\t\tif( ! line.trim() ) continue;\n\t\t\tlines[ i ] = line.substring( indentation );\n\t\t}\n\t\treturn lines;\n\t}\n}\n\nexport default HighlightDirective;\n"],"sourceRoot":"/source/"}