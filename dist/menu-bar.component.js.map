{"version":3,"sources":["menu-bar.component.ts"],"names":[],"mappings":"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","file":"menu-bar.component.js","sourcesContent":["import { Component, ElementRef } from \"@angular/core\";\nimport { ROUTER_DIRECTIVES, Router, Instruction } from \"@angular/router-deprecated\";\n\nimport { RouterService } from \"carbon-panel/router.service\";\nimport { SidebarService } from \"carbon-panel/sidebar.service\";\n\nimport $ from \"jquery\";\nimport \"semantic-ui/semantic\";\n\nimport template from \"./menu-bar.component.html!\";\nimport style from \"./menu-bar.component.css!text\";\n\n@Component( {\n\tselector: \"cp-menu-bar\",\n\ttemplate: template,\n\tstyles: [ style ],\n\tdirectives: [ ROUTER_DIRECTIVES ]\n} )\nexport class MenuBarComponent {\n\tbreadCrumbs:Array<any> = [];\n\tinstructions:Instruction[] = [];\n\n\tprivate element:ElementRef;\n\tprivate router:Router;\n\tprivate routerService:RouterService;\n\tprivate sidebarService:SidebarService;\n\n\tconstructor( element:ElementRef, router:Router, routerService:RouterService, sidebarService:SidebarService ) {\n\t\tthis.element = element;\n\t\tthis.router = router;\n\t\tthis.routerService = routerService;\n\t\tthis.sidebarService = sidebarService;\n\n\t\tthis.router.parent.subscribe( ( url )=> {\n\t\t\tthis.updateBreadcrumbs( url );\n\t\t} );\n\t}\n\n\tupdateBreadcrumbs( url:string ):void {\n\t\tthis.instructions = [];\n\t\tthis.breadCrumbs = [];\n\n\t\tlet workingInstruction:Instruction;\n\t\tthis.router.recognize( url ).then( ( instruction )=> {\n\t\t\tif( ! instruction ) return;\n\n\t\t\tworkingInstruction = instruction;\n\t\t\twhile ( workingInstruction.child ) {\n\t\t\t\tthis.addInstruction( workingInstruction );\n\t\t\t\tworkingInstruction = workingInstruction.child;\n\t\t\t}\n\t\t\tif( ! workingInstruction.child && ! ! workingInstruction.urlPath ) {\n\t\t\t\tthis.addInstruction( workingInstruction );\n\t\t\t}\n\t\t} );\n\t}\n\n\tgetRouteAlias():any {\n\t\tlet alias:any[] = [], params:{name:string} = { name: \"\" };\n\t\tthis.instructions.forEach( ( instruction )=> {\n\t\t\tif( ! instruction ) return;\n\n\t\t\talias.push( instruction.component.routeData.data[ \"alias\" ] );\n\t\t\tparams = instruction.component.routeData.data[ \"params\" ];\n\t\t\tif( params ) alias.push( { [params.name]: instruction.urlPath } );\n\t\t} );\n\t\treturn alias;\n\t}\n\n\taddInstruction( workingInstruction:Instruction ):void {\n\t\tthis.instructions.push( workingInstruction );\n\t\tthis.breadCrumbs.push( {\n\t\t\turl: workingInstruction.urlPath,\n\t\t\tdisplayName: workingInstruction.component.routeData.data[ \"displayName\" ],\n\t\t\talias: this.getRouteAlias(),\n\t\t\tfriendlyAlias: this.getFriendlyAlias()\n\t\t} );\n\t}\n\n\tgetFriendlyAlias():any {\n\t\tlet friendlyURL:string = \"\";\n\t\tthis.instructions.forEach( ( instruction )=> {\n\t\t\tif( ! instruction ) return;\n\n\t\t\tfriendlyURL += instruction.component.routeData.data[ \"alias\" ];\n\t\t\tfriendlyURL += instruction.child ? \"/\" : \"\";\n\t\t} );\n\t\treturn friendlyURL;\n\t}\n\n\ttoggleSidebar():void {\n\t\tthis.sidebarService.toggle();\n\t}\n}\n\nexport default MenuBarComponent;\n"],"sourceRoot":"/source/"}