<div class="ui equal width grid">
	<div class="column">
		<button class="ui icon basic inverted button" title="Refresh my apps"
		        (click)="refreshAgents()">
			<i class="refresh icon" [ngClass]="{loading:loading}"></i>
		</button>
		<button class="ui right labeled icon button" title="Create a new Agent"
		        (click)="createAgent()">
			Create Agent <i class="plus icon"></i>
		</button>
	</div>
</div>
<div class="ui basic segment" [ngClass]="{loading:loading}">
	<table class="ui selectable sortable celled small very compact table">
		<thead>
			<tr>
				<th class="center aligned">Name</th>
				<th class="center aligned">Created</th>
				<th class="center aligned">Modified</th>
				<th class="center aligned">Actions</th>
			</tr>
		</thead>
		<tbody>
			<tr *ngFor="let agent of agents; let i = index;" (click)="openAgent($event, agent)">
				<td>
					<span>{{agent.name}}</span>
					<br>
					<span>{{agent.id}}</span>
				</td>
				<td>
					{{agent.created | date:"MMM dd, yyyy - hh:mm a"}}
				</td>
				<td>
					{{agent.modified | date:"MMM dd, yyyy - hh:mm a"}}
				</td>
				<td class="center aligned">
					<div class="ui small basic icon buttons">
						<a class="ui icon button tooltip" (click)="edit($event, agent)" title="Edit Agent">
							<i class="write icon"></i>
						</a>
						<button class="ui icon button tooltip" (click)="onClickDeleteAgent($event,agent); agentDeleter.show();" title="Delete Agent">
							<i class="trash outline icon"></i>
						</button>
					</div>
				</td>
			</tr>
		</tbody>
		<tfoot>
			<tr>
				<th colspan="4">
					<cp-paginator [totalElements]="totalAgents"
					              [elementsPerPage]="agentsPerPage"
					              [activePage]="activePage"
					              (onPageChange)="changePage($event)"></cp-paginator>
				</th>
			</tr>
		</tfoot>
	</table>
</div>
<cp-agent-details *ngIf="!!inspectingAgent || mode === AgentDetailsModes.CREATE"
                  [agent]="inspectingAgent"
                  [mode]="mode"
                  [appContext]="appContext"
                  (onClose)="closeDetails()">
</cp-agent-details>
<!--Ask for agent deletion-->
<cp-agent-deleter #agentDeleter [context]="appContext" [agent]="deletingAgent"></cp-agent-deleter>